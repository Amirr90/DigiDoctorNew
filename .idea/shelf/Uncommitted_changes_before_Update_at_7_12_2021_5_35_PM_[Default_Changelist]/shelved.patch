Index: app/src/main/res/raw/user_background_call_effect.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/raw/user_background_call_effect.json	(date 1626088540082)
+++ app/src/main/res/raw/user_background_call_effect.json	(date 1626088540082)
@@ -0,0 +1,1 @@
+{"v":"5.5.7","meta":{"g":"LottieFiles AE 0.1.20","a":"","k":"","d":"","tc":"none"},"fr":60,"ip":0,"op":600,"w":1000,"h":1000,"nm":"Comp 1","ddd":0,"assets":[{"id":"image_0","w":266,"h":577,"u":"","p":"data:image/png;base64,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","e":1}],"layers":[{"ddd":0,"ind":1,"ty":2,"nm":"bt-1.png","cl":"png","refId":"image_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[500,500,0],"ix":2},"a":{"a":0,"k":[133,288.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":10,"s":[46,46,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":21,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":31,"s":[65,65,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":81,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":141,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":151,"s":[65,65,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":201,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":261,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":271,"s":[65,65,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":321,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":381,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":391,"s":[65,65,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":441,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":501,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":511,"s":[65,65,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":561,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":621,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":631,"s":[65,65,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":681,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":741,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":751,"s":[65,65,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":801,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":861,"s":[60,60,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":871,"s":[65,65,100]},{"t":921,"s":[60,60,100]}],"ix":6}},"ao":0,"ip":0,"op":7221,"st":21,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Shape Layer 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[500,500,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":21,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":81,"s":[152,152,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":141,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":201,"s":[152,152,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":261,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":321,"s":[152,152,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":381,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":441,"s":[152,152,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":501,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":561,"s":[152,152,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":621,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":681,"s":[152,152,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":741,"s":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":801,"s":[152,152,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":861,"s":[100,100,100]},{"t":921,"s":[152,152,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[472,472],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.058823529411764705,0.5333333333333333,0.9882352941176471,1],"ix":3},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":21,"s":[90]},{"t":69,"s":[0],"h":1},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":141,"s":[90]},{"t":189,"s":[0],"h":1},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":261,"s":[90]},{"t":309,"s":[0],"h":1},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":381,"s":[90]},{"t":429,"s":[0],"h":1},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":501,"s":[90]},{"t":549,"s":[0],"h":1},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":621,"s":[90]},{"t":669,"s":[0],"h":1},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":741,"s":[90]},{"t":789,"s":[0],"h":1},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":861,"s":[90]},{"t":909,"s":[0]}],"ix":4},"w":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":21,"s":[25]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":81,"s":[2]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":141,"s":[25]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":201,"s":[2]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":261,"s":[25]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":321,"s":[2]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":381,"s":[25]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":441,"s":[2]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":501,"s":[25]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":561,"s":[2]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":621,"s":[25]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":681,"s":[2]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":741,"s":[25]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":801,"s":[2]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":861,"s":[25]},{"t":921,"s":[2]}],"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.2901960784313726,0.5647058823529412,0.8862745098039215,1],"ix":4},"o":{"a":0,"k":0,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-2,-2],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":7221,"st":21,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[500,500,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[472,472],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.058823529411764705,0.5333333333333333,0.9882352941176471,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-2,-2],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":7139,"op":7139,"st":-61,"bm":0,"hidden":0}],"markers":[{"tm":0,"cm":"","dr":0},{"tm":10,"cm":"","dr":0},{"tm":921,"cm":"","dr":0}]}
\ No newline at end of file
Index: app/src/main/java/com/digidoctor/android/repositories/PatientRepo.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.repositories;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.os.AsyncTask;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\n\r\nimport com.digidoctor.android.R;\r\nimport com.digidoctor.android.database.AppDao;\r\nimport com.digidoctor.android.database.AppDatabase;\r\nimport com.digidoctor.android.interfaces.ApiCallbackInterface;\r\nimport com.digidoctor.android.interfaces.ApiInterface;\r\nimport com.digidoctor.android.interfaces.EraInvestigationApiInterface;\r\nimport com.digidoctor.android.interfaces.NewApiInterface;\r\nimport com.digidoctor.android.model.AppointmentDetailsRes;\r\nimport com.digidoctor.android.model.AppointmentModel;\r\nimport com.digidoctor.android.model.ChatModel;\r\nimport com.digidoctor.android.model.Dashboard;\r\nimport com.digidoctor.android.model.DocBySpecialityRes;\r\nimport com.digidoctor.android.model.DoctorModel;\r\nimport com.digidoctor.android.model.DoctorModelRes;\r\nimport com.digidoctor.android.model.EraInvestigationData;\r\nimport com.digidoctor.android.model.GetPatientMedicationMainModel;\r\nimport com.digidoctor.android.model.InvestigationModel;\r\nimport com.digidoctor.android.model.MedicineModel;\r\nimport com.digidoctor.android.model.NavModel;\r\nimport com.digidoctor.android.model.PatientDashboardModel;\r\nimport com.digidoctor.android.model.SpecialityModel;\r\nimport com.digidoctor.android.model.SpecialityRes;\r\nimport com.digidoctor.android.model.SymptomModel;\r\nimport com.digidoctor.android.model.SymptomsRes;\r\nimport com.digidoctor.android.model.User;\r\nimport com.digidoctor.android.model.VitalModel;\r\nimport com.digidoctor.android.model.VitalResponse;\r\nimport com.digidoctor.android.model.WalletModel;\r\nimport com.digidoctor.android.model.labmodel.LabDashBoardmodel;\r\nimport com.digidoctor.android.model.patientModel.HospitalAndPackageResponse;\r\nimport com.digidoctor.android.model.patientModel.SymptomsNotificationModel;\r\nimport com.digidoctor.android.utility.ApiUtils;\r\nimport com.digidoctor.android.utility.App;\r\nimport com.digidoctor.android.utility.AppUtils;\r\nimport com.digidoctor.android.utility.Response;\r\nimport com.digidoctor.android.utility.utils;\r\nimport com.digidoctor.android.view.activity.PatientDashboard;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\nimport static com.digidoctor.android.utility.ApiUtils.getDocBySpecialityById;\r\nimport static com.digidoctor.android.utility.ApiUtils.getPatientDasboard;\r\nimport static com.digidoctor.android.utility.ApiUtils.getPatientMedicationDetails;\r\nimport static com.digidoctor.android.utility.ApiUtils.getRecommendedDoc;\r\nimport static com.digidoctor.android.utility.ApiUtils.getSymptomWithIconsData;\r\nimport static com.digidoctor.android.utility.ApiUtils.specialityData;\r\nimport static com.digidoctor.android.utility.AppUtils.hideDialog;\r\nimport static com.digidoctor.android.utility.AppUtils.showRequestDialog;\r\nimport static com.digidoctor.android.utility.utils.getPrimaryUser;\r\nimport static com.digidoctor.android.utility.utils.logout;\r\n\r\npublic class PatientRepo {\r\n\r\n    public MutableLiveData<PatientDashboardModel> patientDashboardModelMutableLiveData;\r\n    public MutableLiveData<List<SpecialityModel>> specialityModelMutableLiveData;\r\n    public MutableLiveData<List<SymptomModel>> symptomsModelMutableLiveData;\r\n    public MutableLiveData<List<DoctorModel>> doctorModelMutableLiveData;\r\n    public MutableLiveData<List<DoctorModelRes>> recommendedDoctorModelMutableLiveData;\r\n    public MutableLiveData<List<GetPatientMedicationMainModel>> prescriptionModelMutableLiveData;\r\n    public MutableLiveData<List<User>> memberModelMutableLiveData;\r\n    public MutableLiveData<List<VitalResponse.VitalDateVise>> vitalsMutableLiveData;\r\n    public MutableLiveData<List<InvestigationModel>> investigationMutableLiveData;\r\n    public MutableLiveData<List<SpecialityModel>> specialityEmcModelMutableLiveData;\r\n\r\n    public MutableLiveData<List<AppointmentModel>> appointmentMutableLiveData;\r\n\r\n    public MutableLiveData<List<AppointmentDetailsRes.Appointments>> appointmentMutableLivedetails;\r\n\r\n    public MutableLiveData<List<ChatModel>> chatMutableLiveData;\r\n    public MutableLiveData<List<HospitalAndPackageResponse>> loadHospitalAndPackageList;\r\n\r\n    public MutableLiveData<List<SymptomsNotificationModel>> symptomsNotificationModelMutableLiveData;\r\n    public MutableLiveData<List<SymptomModel>> allDepartmentData;\r\n\r\n\r\n    //Lab member Variable\r\n    public MutableLiveData<LabDashBoardmodel> labDashboardModelMutableLiveData;\r\n\r\n\r\n    public MutableLiveData<String> specialityText;\r\n\r\n\r\n    AppDao appDao;\r\n    MutableLiveData<MedicineModel> mutableLiveDataMedicine;\r\n\r\n    public PatientRepo(Context application) {\r\n        AppDatabase userDatabase = AppDatabase.getDatabase(application);\r\n        appDao = userDatabase.getAppDao();\r\n        MedicineModel medicineModel = new MedicineModel();\r\n        medicineModel.setMedicineList((List<MedicineModel.MedicineDetailModel>) appDao.getAllMedicineList());\r\n        mutableLiveDataMedicine.setValue(medicineModel);\r\n    }\r\n\r\n    public PatientRepo() {\r\n    }\r\n\r\n    public LiveData<List<ChatModel>> getChatData(AppointmentModel user) {\r\n        if (chatMutableLiveData == null) {\r\n            chatMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadChatData(user);\r\n        return chatMutableLiveData;\r\n\r\n    }\r\n\r\n    public LiveData<String> getSpecialityText() {\r\n        if (null == specialityText)\r\n            specialityText = new MutableLiveData<>();\r\n        return specialityText;\r\n    }\r\n\r\n    private void loadChatData(AppointmentModel user) {\r\n\r\n        ApiUtils.getChatResponse(ApiUtils.getChatData(user), new NewApiInterface() {\r\n            @Override\r\n            public void onSuccess(Object obj) {\r\n                List<ChatModel> chatModels = (List<ChatModel>) obj;\r\n                chatMutableLiveData.setValue(chatModels);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(String msg) {\r\n                Log.d(\"loadChatData\", \"onFailed: \" + msg);\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<AppointmentModel>> getAppointmentList(User user) {\r\n        if (appointmentMutableLiveData == null) {\r\n            appointmentMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadAppointmentData(user);\r\n        return appointmentMutableLiveData;\r\n\r\n    }\r\n\r\n    public LiveData<List<AppointmentDetailsRes.Appointments>> getAppointmentDetails(User user) {\r\n        if (appointmentMutableLivedetails == null) {\r\n            appointmentMutableLivedetails = new MutableLiveData<>();\r\n        }\r\n        loadAppointmentDetails(user);\r\n        return appointmentMutableLivedetails;\r\n\r\n    }\r\n\r\n    private void loadAppointmentData(User user) {\r\n        ApiUtils.getAppointmentData(user, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> obj) {\r\n                List<AppointmentModel> models = (List<AppointmentModel>) obj;\r\n                appointmentMutableLiveData.setValue(models);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                Log.d(\"InvestigationData\", \"onError: \" + s);\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                Log.d(\"InvestigationData\", \"onFailed: \" + throwable.getLocalizedMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n    private void loadAppointmentDetails(User user) {\r\n        ApiUtils.getAppointmentDetails(user, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> obj) {\r\n                List<AppointmentDetailsRes.Appointments> models = (List<AppointmentDetailsRes.Appointments>) obj;\r\n                Log.d(\"loadAppointmentDetails\", \"onSuccess: \" + models.get(0));\r\n                appointmentMutableLivedetails.setValue(models);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                Log.d(\"InvestigationData\", \"onError: \" + s);\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                Log.d(\"InvestigationData\", \"onFailed: \" + throwable.getLocalizedMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<InvestigationModel>> getInvestigationData(User user) {\r\n        if (investigationMutableLiveData == null) {\r\n            investigationMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadInvestigationData(user);\r\n        return investigationMutableLiveData;\r\n\r\n    }\r\n\r\n    private void loadInvestigationData(User user) {\r\n\r\n        ApiUtils.getInvestigationData(user, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> obj) {\r\n                List<InvestigationModel> models = (List<InvestigationModel>) obj;\r\n                investigationMutableLiveData.setValue(models);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                Log.d(\"InvestigationData\", \"onError: \" + s);\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                Log.d(\"InvestigationData\", \"onFailed: \" + throwable.getLocalizedMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<VitalResponse.VitalDateVise>> getVitals(VitalModel vitalModel, Activity activity) {\r\n        if (vitalsMutableLiveData == null) {\r\n            vitalsMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadVitalData(vitalModel, activity);\r\n        return vitalsMutableLiveData;\r\n\r\n    }\r\n\r\n    private void loadVitalData(final VitalModel vitalModel, final Activity activity) {\r\n\r\n        showRequestDialog(activity);\r\n        ApiUtils.getVitalsList(vitalModel, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                hideDialog();\r\n                List<VitalResponse.VitalDateVise> vitalResponse = (List<VitalResponse.VitalDateVise>) o;\r\n                vitalsMutableLiveData.setValue(vitalResponse);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                hideDialog();\r\n                Toast.makeText(activity, s, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                hideDialog();\r\n                Toast.makeText(activity, throwable.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<User>> getMemberList(Activity activity) {\r\n        if (memberModelMutableLiveData == null) {\r\n            memberModelMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadMemberData(activity);\r\n        return memberModelMutableLiveData;\r\n\r\n    }\r\n\r\n    private void loadMemberData(final Activity activity) {\r\n        ApiUtils.GetMembersRes(activity, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                List<User> userList = (List<User>) o;\r\n                if (null != userList && !userList.isEmpty()) {\r\n                    memberModelMutableLiveData.setValue(userList);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                Toast.makeText(activity, s, Toast.LENGTH_SHORT).show();\r\n                try {\r\n                    if (s.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                Toast.makeText(activity, throwable.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<GetPatientMedicationMainModel>> getPrescriptionData(Activity activity) {\r\n        if (prescriptionModelMutableLiveData == null) {\r\n            prescriptionModelMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadPrescriptionData(activity);\r\n        return prescriptionModelMutableLiveData;\r\n\r\n    }\r\n\r\n    private void loadPrescriptionData(final Activity activity) {\r\n\r\n        AppUtils.showRequestDialog(activity);\r\n        getPatientMedicationDetails(activity, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                AppUtils.hideDialog();\r\n                List<GetPatientMedicationMainModel> patientMedicationMainModels = (List<GetPatientMedicationMainModel>) o;\r\n                if (patientMedicationMainModels != null) {\r\n                    prescriptionModelMutableLiveData.setValue(patientMedicationMainModels);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                AppUtils.hideDialog();\r\n                Toast.makeText(activity, s, Toast.LENGTH_SHORT).show();\r\n                try {\r\n                    if (s.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                AppUtils.hideDialog();\r\n                Toast.makeText(activity, throwable.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<DoctorModelRes>> gerRecommendedDoctorsData(HashMap<String, String> map) {\r\n        if (recommendedDoctorModelMutableLiveData == null) {\r\n            recommendedDoctorModelMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadRecommendedDocData(map);\r\n        return recommendedDoctorModelMutableLiveData;\r\n\r\n    }\r\n\r\n    private void loadRecommendedDocData(HashMap<String, String> map) {\r\n        getRecommendedDoc(map, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                List<DoctorModelRes> doctorModelRes = (List<DoctorModelRes>) o;\r\n                if (null != doctorModelRes) {\r\n                    recommendedDoctorModelMutableLiveData.setValue(doctorModelRes);\r\n                    if (doctorModelRes.get(0).getPopularDoctor().isEmpty()\r\n                            && doctorModelRes.get(0).getRecomendedDoctor().isEmpty())\r\n                        Toast.makeText(PatientDashboard.getInstance(), R.string.no_doc_found, Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n\r\n                try {\r\n                    if (s.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                Toast.makeText(PatientDashboard.getInstance(), throwable.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<DoctorModel>> getDocBySpeciality(SpecialityModel specialityModel) {\r\n        if (doctorModelMutableLiveData == null)\r\n            doctorModelMutableLiveData = new MutableLiveData<>();\r\n        loadDocBySpecialityData(specialityModel);\r\n        return doctorModelMutableLiveData;\r\n\r\n    }\r\n\r\n    private void loadDocBySpecialityData(SpecialityModel specialityModel) {\r\n\r\n        getDocBySpecialityById(specialityModel, new ApiUtils.SpecialityInterface() {\r\n            @Override\r\n            public void onSuccess(Object o) {\r\n                AppUtils.hideDialog();\r\n                DocBySpecialityRes res = (DocBySpecialityRes) o;\r\n                if (null != res) {\r\n                    doctorModelMutableLiveData.setValue(res.getResponseValue());\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(String msg) {\r\n                AppUtils.hideDialog();\r\n                Toast.makeText(PatientDashboard.getInstance(), msg, Toast.LENGTH_SHORT).show();\r\n                try {\r\n                    if (msg.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), msg, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<SymptomModel>> getSymptomsData(String symptomName) {\r\n        if (symptomsModelMutableLiveData == null) {\r\n            symptomsModelMutableLiveData = new MutableLiveData<>();\r\n        }\r\n        loadSymptomsData(symptomName);\r\n        return symptomsModelMutableLiveData;\r\n    }\r\n\r\n    private void loadSymptomsData(String symptomName) {\r\n\r\n\r\n        getSymptomWithIconsData(symptomName, new ApiUtils.SpecialityInterface() {\r\n            @Override\r\n            public void onSuccess(Object o) {\r\n                SymptomsRes res = (SymptomsRes) o;\r\n\r\n                try {\r\n                    symptomsModelMutableLiveData.setValue(res.getResponseValue());\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(String s) {\r\n                Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                try {\r\n                    if (s.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public LiveData<List<SpecialityModel>> getSpecialityData(String specialityName) {\r\n        if (specialityModelMutableLiveData == null)\r\n            specialityModelMutableLiveData = new MutableLiveData<>();\r\n\r\n        loadSpecialityData(specialityName);\r\n        return specialityModelMutableLiveData;\r\n    }\r\n\r\n    private void loadSpecialityData(String specialityName) {\r\n\r\n        specialityData(specialityName, new ApiUtils.SpecialityInterface() {\r\n            @Override\r\n            public void onSuccess(Object o) {\r\n                try {\r\n                    SpecialityRes res = (SpecialityRes) o;\r\n                    specialityModelMutableLiveData.setValue(res.getResponseValue());\r\n                    if (null == specialityText)\r\n                        specialityText = new MutableLiveData<>();\r\n                    specialityText.setValue(res.getText());\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(String s) {\r\n                try {\r\n                    if (s.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public LiveData<PatientDashboardModel> getDashboardData(String lat, String lng) {\r\n        if (patientDashboardModelMutableLiveData == null) {\r\n            patientDashboardModelMutableLiveData = new MutableLiveData<>();\r\n            Dashboard dashboard = new Dashboard();\r\n            dashboard.setLat(lat);\r\n            dashboard.setLat(lng);\r\n            loadPatientDashboardData(dashboard);\r\n\r\n        }\r\n\r\n\r\n        return patientDashboardModelMutableLiveData;\r\n    }\r\n\r\n    private void loadPatientDashboardData(Dashboard dashboard) {\r\n        getPatientDasboard(dashboard, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                PatientDashboardModel dashboardModel = (PatientDashboardModel) o.get(0);\r\n                if (null != dashboardModel) {\r\n                    patientDashboardModelMutableLiveData.setValue(dashboardModel);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                try {\r\n                    if (s.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n\r\n                Toast.makeText(PatientDashboard.getInstance(), throwable.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    public LiveData<LabDashBoardmodel> getLabDashboardModel(String lat, String lng) {\r\n        if (labDashboardModelMutableLiveData == null) {\r\n            labDashboardModelMutableLiveData = new MutableLiveData<>();\r\n        }\r\n\r\n\r\n        Dashboard dashboard = new Dashboard();\r\n        dashboard.setLat(lat);\r\n        dashboard.setLat(lng);\r\n        dashboard.setMemberId(String.valueOf(getPrimaryUser(PatientDashboard.getInstance()).getMemberId()));\r\n        loadLabDashboardData(dashboard);\r\n        return labDashboardModelMutableLiveData;\r\n    }\r\n\r\n    private void loadLabDashboardData(Dashboard dashboard) {\r\n        showRequestDialog(PatientDashboard.getInstance());\r\n        Response.getDashboardResponse(ApiUtils.getLabDashboard(dashboard), new ApiInterface() {\r\n            @Override\r\n            public void onSuccess(Object obj) {\r\n                hideDialog();\r\n                List<LabDashBoardmodel> dashboardData = (List<LabDashBoardmodel>) obj;\r\n                if (null == dashboardData || dashboardData.isEmpty())\r\n                    return;\r\n\r\n                LabDashBoardmodel labDashBoardmodel = dashboardData.get(0);\r\n                if (null == labDashboardModelMutableLiveData)\r\n                    labDashboardModelMutableLiveData = new MutableLiveData<>();\r\n\r\n                labDashboardModelMutableLiveData.setValue(labDashBoardmodel);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(String msg) {\r\n                hideDialog();\r\n                Log.d(\"TAG\", \"onFailed: \" + msg);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public LiveData<List<SymptomsNotificationModel>> getSymptomsNotificationData(String memberId) {\r\n        if (symptomsNotificationModelMutableLiveData == null)\r\n            symptomsNotificationModelMutableLiveData = new MutableLiveData<>();\r\n        loadNotificationData(memberId);\r\n\r\n        return symptomsNotificationModelMutableLiveData;\r\n    }\r\n\r\n    private void loadNotificationData(String memberId) {\r\n\r\n\r\n        ApiUtils.getSymptomsNotification(memberId, symptomsNotificationModelsList -> {\r\n\r\n            if (symptomsNotificationModelMutableLiveData == null)\r\n                symptomsNotificationModelMutableLiveData = new MutableLiveData<>();\r\n            symptomsNotificationModelMutableLiveData.setValue(symptomsNotificationModelsList);\r\n        });\r\n    }\r\n\r\n    public LiveData<List<HospitalAndPackageResponse>> getHospitalAndPackageList() {\r\n\r\n        if (loadHospitalAndPackageList == null) {\r\n            loadHospitalAndPackageList = new MutableLiveData<>();\r\n            loadHospitalAndPackageList();\r\n        }\r\n        return loadHospitalAndPackageList;\r\n    }\r\n\r\n\r\n    private void loadHospitalAndPackageList() {\r\n        ApiUtils.loadHospitalAndPackage(new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                loadHospitalAndPackageList.setValue((List<HospitalAndPackageResponse>) o);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                Toast.makeText(App.context, \"failed to load hospital list !!\", Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                Toast.makeText(App.context, \"something went wrong, try again !!\", Toast.LENGTH_SHORT).show();\r\n                Log.d(\"loadHospitalAnd\", \"onFailed: \" + throwable.getLocalizedMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n    public LiveData<List<SymptomModel>> getAppDepartmentData(String symptomName) {\r\n\r\n\r\n        if (allDepartmentData == null) {\r\n            allDepartmentData = new MutableLiveData<>();\r\n        }\r\n        loadAllDepartmentData(symptomName);\r\n        return allDepartmentData;\r\n    }\r\n\r\n    private void loadAllDepartmentData(String symptomName) {\r\n        ApiUtils.getSymptomWithIconsData(symptomName, new ApiUtils.SpecialityInterface() {\r\n            @Override\r\n            public void onSuccess(Object o) {\r\n                SymptomsRes res = (SymptomsRes) o;\r\n                try {\r\n                    allDepartmentData.setValue(res.getResponseValue());\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(String s) {\r\n                Toast.makeText(App.context, s, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    public LiveData<List<SpecialityModel>> getEmcDepartmentData() {\r\n        if (null == specialityEmcModelMutableLiveData)\r\n            specialityEmcModelMutableLiveData = new MutableLiveData<>();\r\n        loadEmcData();\r\n        return specialityEmcModelMutableLiveData;\r\n    }\r\n\r\n    private void loadEmcData() {\r\n        ApiUtils.loadEmcData(new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                try {\r\n                    List<SpecialityModel> specialityModel = (List<SpecialityModel>) o;\r\n                    specialityEmcModelMutableLiveData.setValue(specialityModel);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n\r\n                try {\r\n                    if (s.equalsIgnoreCase(\"Failed to authenticate token !!\")) {\r\n                        logout(PatientDashboard.getInstance(), true);\r\n                        Toast.makeText(PatientDashboard.getInstance(), s, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    public MutableLiveData<EraInvestigationData> eraInvestigationDataMutableLiveData;\r\n\r\n    public LiveData<EraInvestigationData> eraInvestigationData(String pid, Activity activity) {\r\n        if (null == eraInvestigationDataMutableLiveData)\r\n            eraInvestigationDataMutableLiveData = new MutableLiveData<>();\r\n        loadEraInvestigationData(pid, activity);\r\n        return eraInvestigationDataMutableLiveData;\r\n    }\r\n\r\n    private void loadEraInvestigationData(String pid, Activity activity) {\r\n        AppUtils.showRequestDialog(activity);\r\n        ApiUtils.loadEraInvestigationData(pid, new EraInvestigationApiInterface() {\r\n            @Override\r\n            public void onSuccess(Object obj) {\r\n                AppUtils.hideDialog();\r\n                EraInvestigationData eraInvestigationData = (EraInvestigationData) obj;\r\n                if (null != eraInvestigationData) {\r\n                    if (eraInvestigationData.getInvestigationResult().isEmpty())\r\n                        Toast.makeText(activity, \"No investigation !!\", Toast.LENGTH_SHORT).show();\r\n                    eraInvestigationDataMutableLiveData.setValue(eraInvestigationData);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(String msg) {\r\n                Log.d(\"TAG\", \"loadEraInvestigationData: \" + msg);\r\n                Toast.makeText(App.context, msg, Toast.LENGTH_SHORT).show();\r\n                AppUtils.hideDialog();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    public MutableLiveData<List<NavModel>> menuItemData;\r\n\r\n    public LiveData<List<NavModel>> getMenuData() {\r\n        if (null == menuItemData) {\r\n            menuItemData = new MutableLiveData<>();\r\n            new GetMenuFroUser(menuItemData).execute();\r\n        }\r\n        return menuItemData;\r\n    }\r\n\r\n\r\n    public LiveData<MedicineModel> getAllMedicineData() {\r\n        if (null == mutableLiveDataMedicine) {\r\n            mutableLiveDataMedicine = new MutableLiveData<>();\r\n            initMedicineData();\r\n        }\r\n\r\n        return mutableLiveDataMedicine;\r\n    }\r\n\r\n    private void initMedicineData() {\r\n        new InsertMedicineDataInTable(appDao, mutableLiveDataMedicine).execute();\r\n    }\r\n\r\n    MutableLiveData<List<WalletModel>> mutableWalletData;\r\n\r\n    public LiveData<List<WalletModel>> getWallet() {\r\n        if (null == mutableWalletData)\r\n            mutableWalletData = new MutableLiveData<>();\r\n        loadWallet();\r\n        return mutableWalletData;\r\n    }\r\n\r\n    private void loadWallet() {\r\n        ApiUtils.getWalletData(new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                List<WalletModel> responseValue = (List<WalletModel>) o;\r\n                mutableWalletData.setValue(responseValue);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n                hideDialog();\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n                hideDialog();\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    MutableLiveData<List<DocumentSnapshot>> mutableCallLogs;\r\n\r\n    public LiveData<List<DocumentSnapshot>> getCallLogs() {\r\n        if (null == mutableCallLogs)\r\n            mutableWalletData = new MutableLiveData<>();\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        User user = utils.getUserForBooking(App.context);\r\n        db.collection(AppUtils.VIDEO_CALLS).whereEqualTo(\"uid\", \"\" + user.getId()).get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n                if (null != queryDocumentSnapshots && !queryDocumentSnapshots.isEmpty())\r\n                    mutableCallLogs.setValue(queryDocumentSnapshots.getDocuments());\r\n            }\r\n        });\r\n\r\n        return mutableCallLogs;\r\n    }\r\n\r\n\r\n    public static class InsertMedicineDataInTable extends AsyncTask<Void, Void, Void> {\r\n\r\n        AppDao appDao;\r\n        MutableLiveData<MedicineModel> mutableLiveDataMedicine;\r\n\r\n        public InsertMedicineDataInTable(AppDao appDao, MutableLiveData<MedicineModel> mutableLiveDataMedicine) {\r\n            this.appDao = appDao;\r\n            this.mutableLiveDataMedicine = mutableLiveDataMedicine;\r\n        }\r\n\r\n        @Override\r\n        protected Void doInBackground(Void... voids) {\r\n\r\n            ApiUtils.getMedicineData(new ApiCallbackInterface() {\r\n                @Override\r\n                public void onSuccess(List<?> o) {\r\n                    appDao.deleteAllUser();\r\n                    List<MedicineModel> responseValue = (List<MedicineModel>) o;\r\n                    for (int a = 0; a < responseValue.get(0).getMedicineList().size(); a++) {\r\n                        appDao.addMedicineData(responseValue.get(0).getMedicineList().get(a));\r\n                    }\r\n\r\n\r\n                    /*for (int a = 0; a < responseValue.get(0).getFrequencyList().size(); a++) {\r\n                        appDao.addMedicineData(responseValue.get(0).getFrequencyList().get(a));\r\n                    }*/\r\n\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onError(String s) {\r\n                    hideDialog();\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onFailed(Throwable throwable) {\r\n                    hideDialog();\r\n\r\n                }\r\n            });\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public interface SymptomsNotificationInterface {\r\n        void onResponseSuccess(List<SymptomsNotificationModel> symptomsNotificationModelsList);\r\n    }\r\n\r\n\r\n    public static class GetMenuFroUser extends AsyncTask<Void, Void, Void> {\r\n\r\n        public MutableLiveData<List<NavModel>> menuItemData;\r\n\r\n        public GetMenuFroUser(MutableLiveData<List<NavModel>> menuItemData) {\r\n            this.menuItemData = menuItemData;\r\n        }\r\n\r\n        @Override\r\n        protected Void doInBackground(Void... voids) {\r\n            ApiUtils.getMenuData(new ApiCallbackInterface() {\r\n                @Override\r\n                public void onSuccess(List<?> o) {\r\n                    List<NavModel> navModels = (List<NavModel>) o;\r\n                    menuItemData.setValue(navModels);\r\n                }\r\n\r\n                @Override\r\n                public void onError(String s) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onFailed(Throwable throwable) {\r\n\r\n                }\r\n            });\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/repositories/PatientRepo.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/repositories/PatientRepo.java	(date 1626085931706)
@@ -823,7 +823,7 @@
 
     public LiveData<List<DocumentSnapshot>> getCallLogs() {
         if (null == mutableCallLogs)
-            mutableWalletData = new MutableLiveData<>();
+            mutableCallLogs = new MutableLiveData<>();
         FirebaseFirestore db = FirebaseFirestore.getInstance();
         User user = utils.getUserForBooking(App.context);
         db.collection(AppUtils.VIDEO_CALLS).whereEqualTo("uid", "" + user.getId()).get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {
Index: app/src/main/java/com/digidoctor/android/utility/FirebaseMessageService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.utility;\r\n\r\nimport android.app.Notification;\r\nimport android.app.NotificationChannel;\r\nimport android.app.NotificationManager;\r\nimport android.app.PendingIntent;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Color;\r\nimport android.media.Ringtone;\r\nimport android.media.RingtoneManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport androidx.core.app.NotificationCompat;\r\nimport androidx.navigation.NavDeepLinkBuilder;\r\n\r\nimport com.digidoctor.android.R;\r\nimport com.digidoctor.android.newVideoCall.IncomingCallActivity;\r\nimport com.digidoctor.android.view.activity.PatientDashboard;\r\nimport com.google.firebase.messaging.FirebaseMessagingService;\r\nimport com.google.firebase.messaging.RemoteMessage;\r\n\r\nimport org.jetbrains.annotations.NotNull;\r\n\r\nimport java.util.Date;\r\n\r\nimport timber.log.Timber;\r\n\r\npublic class FirebaseMessageService extends FirebaseMessagingService {\r\n    private static final String TAG = \"FirebaseMessageService\";\r\n\r\n    String CHANNEL_ID = \"com.digidoctor.android\";\r\n\r\n    private NotificationManager mManager;\r\n\r\n    SharedPreferences prefs;\r\n\r\n    Bitmap bitmap;\r\n\r\n    Context context;\r\n\r\n    int directionId;\r\n\r\n    @Override\r\n    public void onNewToken(@NotNull String token) {\r\n        Timber.tag(TAG).v(\"Refreshed token: %s\", token);\r\n        AppUtils.updateTokenToDatabase(token);\r\n    }\r\n\r\n    @Override\r\n    public void onMessageReceived(RemoteMessage remoteMessage) {\r\n\r\n        /*Timber.d(\"FCM Message Id: %s\", remoteMessage.getMessageId());\r\n        Timber.d(\"FCM Notification Message: \" + remoteMessage.getData() + \"....\" + remoteMessage.getFrom());\r\n*/\r\n        context = this;\r\n\r\n        Timber.d(\"onMessageReceived: %s\", remoteMessage.getData());\r\n        try {\r\n            String callId = remoteMessage.getData().get(\"roomName\");\r\n            String image = remoteMessage.getData().get(\"profilePhotoPath\");\r\n            String doctorName = remoteMessage.getData().get(\"doctorName\");\r\n            setupCallNotification(callId, image, doctorName);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Timber.d(\"onMessageReceived Error: %s\", e.getLocalizedMessage());\r\n        }\r\n\r\n\r\n    /*    if (remoteMessage.getData() != null) {\r\n            Map<String, String> params = remoteMessage.getData();\r\n            JSONObject json = new JSONObject(params);\r\n\r\n            try {\r\n                String message;\r\n                int typeMain;\r\n                String twillioAccessToken = \"\";\r\n                String roomName = \"\";\r\n                String profilePhotoPath = \"\";\r\n                String doctorName = \"\";\r\n                String titleToShow = \"\";\r\n                String appointmentId = \"\";\r\n                String deepLink = \"\";\r\n\r\n\r\n                message = json.getString(\"message\");\r\n                typeMain = json.getInt(\"type\");\r\n                profilePhotoPath = json.getString(\"profilePhotoPath\");\r\n                doctorName = json.getString(\"doctorName\");\r\n                titleToShow = json.getString(\"title\");\r\n\r\n\r\n                prefs = getSharedPreferences(utils.PREFS_MAIN_FILE, Context.MODE_PRIVATE);\r\n\r\n                if (typeMain == 1) {\r\n                    roomName = json.getString(\"roomName\");\r\n                    twillioAccessToken = json.getString(\"twillioAccessToken\");\r\n\r\n                    Log.d(TAG, \"onMessageReceived: roomName : => \" + roomName);\r\n                    Log.d(TAG, \"onMessageReceived: twillioAccessToken => \" + twillioAccessToken);\r\n\r\n                }\r\n\r\n                if (typeMain == 2) {\r\n                    if (remoteMessage.getNotification() != null)\r\n                        appointmentId = remoteMessage.getNotification().getClickAction();\r\n                    else\r\n                        appointmentId = json.getString(\"appointmentId\");\r\n\r\n                    deepLink = json.getString(\"deepLink\");\r\n                }\r\n\r\n                createNotification(titleToShow, message, roomName, typeMain, twillioAccessToken, profilePhotoPath, doctorName, appointmentId, deepLink);\r\n\r\n\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                Log.d(TAG, \"onMessageReceived: \" + e.getLocalizedMessage());\r\n            }\r\n        }\r\n*/\r\n\r\n\r\n    }\r\n\r\n    private void setupCallNotification(String callId, String image, String doctorName) {\r\n        Intent intent = new Intent(this, IncomingCallActivity.class);\r\n        intent.putExtra(AppUtils.CALL_ID, callId);\r\n        intent.putExtra(AppUtils.ICON, image);\r\n        intent.putExtra(AppUtils.DOCTOR_NAME, doctorName);\r\n        /*myIntent.setAction(\"myReceiver\");\r\n        myIntent.putExtra(\"roomName\", roomName);\r\n        myIntent.putExtra(\"accessToken\", twillioAccessToken);\r\n        myIntent.putExtra(\"message\", msg);\r\n        myIntent.putExtra(\"title\", title);\r\n        myIntent.putExtra(\"profilePhotoPath\", profilePhotoPath);\r\n        myIntent.putExtra(\"doctorName\", doctorName);*/\r\n\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n        startActivity(intent);\r\n\r\n    }\r\n\r\n    public void createNotification(String title, String msg, String roomName, int type, String twillioAccessToken, String profilePhotoPath, String doctorName, String appointmentId, String deepLink) {\r\n\r\n        if (type == 1) {\r\n\r\n            Intent myIntent = new Intent(this, WakefulBroadcasterReceiver.class);\r\n            myIntent.setAction(\"myReceiver\");\r\n            myIntent.putExtra(\"roomName\", roomName);\r\n            myIntent.putExtra(\"accessToken\", twillioAccessToken);\r\n            myIntent.putExtra(\"message\", msg);\r\n            myIntent.putExtra(\"title\", title);\r\n            myIntent.putExtra(\"profilePhotoPath\", profilePhotoPath);\r\n            myIntent.putExtra(\"doctorName\", doctorName);\r\n\r\n            // sendBroadcast(myIntent);\r\n\r\n            NotificationVideoCall videoCall = new NotificationVideoCall(msg, title, doctorName, profilePhotoPath, roomName);\r\n            videoCall.startVideo();\r\n\r\n\r\n        } else {\r\n            Log.d(TAG, \"createNotification: in Type \");\r\n\r\n            Bundle bundle = new Bundle();\r\n            if (type == 4) {\r\n                directionId = R.id.homeIsolationRequestDetailFragment;\r\n                bundle.putString(\"id\", appointmentId);\r\n            } else {\r\n                directionId = R.id.appointmentDetailFragment;\r\n                bundle.putString(\"appointmentId\", appointmentId);\r\n            }\r\n            PendingIntent pendingIntent = new NavDeepLinkBuilder(PatientDashboard.getInstance())\r\n                    .setGraph(R.navigation.nav_graph)\r\n                    .setDestination(directionId)\r\n                    .setArguments(bundle)\r\n                    .createPendingIntent();\r\n\r\n            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\r\n                Log.d(TAG, \"createNotification: \");\r\n                NotificationChannel androidChannel = new NotificationChannel(CHANNEL_ID,\r\n                        title, NotificationManager.IMPORTANCE_HIGH);\r\n                androidChannel.enableLights(true);\r\n                androidChannel.enableVibration(true);\r\n                androidChannel.setLightColor(Color.GREEN);\r\n\r\n                androidChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);\r\n                getManager().createNotificationChannel(androidChannel);\r\n\r\n                NotificationCompat.Builder notification = new NotificationCompat.Builder(getApplicationContext(), CHANNEL_ID)\r\n                        .setSmallIcon(R.mipmap.ic_launcher)\r\n                        .setContentTitle(title)\r\n                        .setContentText(msg)\r\n                        .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))\r\n                        .setAutoCancel(true) //remove notification after click\r\n                        .setContentIntent(pendingIntent);\r\n\r\n                if (bitmap != null) {\r\n                    notification.setLargeIcon(bitmap);\r\n                }\r\n\r\n                //int timestamp = 1000;\r\n                int timestamp = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);\r\n\r\n                getManager().notify(timestamp, notification.build());\r\n\r\n                playNotificationSound();\r\n\r\n            } else {\r\n                Log.d(TAG, \"createNotification: else\");\r\n                try {\r\n\r\n                    playNotificationSound();\r\n                    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(context)\r\n                            .setSmallIcon(R.mipmap.ic_launcher)\r\n                            .setContentTitle(title)\r\n                            .setContentText(msg)\r\n                            .setAutoCancel(true)\r\n                            .setPriority(NotificationCompat.PRIORITY_HIGH)\r\n                            .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))\r\n                            .setContentIntent(pendingIntent)\r\n                            .setDefaults(Notification.DEFAULT_ALL)\r\n                            .setLights(0xFF760193, 300, 1000)\r\n                            .setVibrate(new long[]{200, 400});\r\n\r\n                    if (bitmap != null) {\r\n                        notificationBuilder.setLargeIcon(bitmap);\r\n                    }\r\n                    int timestamp = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);\r\n                    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n                    notificationManager.notify(timestamp, notificationBuilder.build());\r\n                } catch (SecurityException se) {\r\n                    se.printStackTrace();\r\n                    Log.d(TAG, \"createNotification: \" + se.getLocalizedMessage());\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private NotificationManager getManager() {\r\n        if (mManager == null) {\r\n            mManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        }\r\n        return mManager;\r\n    }\r\n\r\n    public void playNotificationSound() {\r\n        try {\r\n            Uri notificationSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            Ringtone r = RingtoneManager.getRingtone(this, notificationSoundUri);\r\n            r.play();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/utility/FirebaseMessageService.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/utility/FirebaseMessageService.java	(date 1626076811919)
@@ -61,11 +61,26 @@
         context = this;
 
         Timber.d("onMessageReceived: %s", remoteMessage.getData());
+        Log.d(TAG, "onMessageReceived: " + remoteMessage.getData());
         try {
-            String callId = remoteMessage.getData().get("roomName");
-            String image = remoteMessage.getData().get("profilePhotoPath");
-            String doctorName = remoteMessage.getData().get("doctorName");
-            setupCallNotification(callId, image, doctorName);
+
+
+            //checking for notification Type
+            String type = remoteMessage.getData().get("type");
+            String deepLink = remoteMessage.getData().get("deepLink");
+
+            if (type.equalsIgnoreCase(AppUtils.NOTIFICATION_TYPE_VIDEO_CALL)) {
+                String callId = remoteMessage.getData().get("roomName");
+                String image = remoteMessage.getData().get("profilePhotoPath");
+                String doctorName = remoteMessage.getData().get("doctorName");
+                setupCallNotification(callId, image, doctorName);
+            } else {
+                String message = remoteMessage.getData().get("message");
+                String titleToShow = remoteMessage.getData().get("title");
+                String appointmentId = remoteMessage.getData().get("appointmentId");
+                createNotification(titleToShow, message, type, appointmentId, deepLink);
+
+            }
         } catch (Exception e) {
             e.printStackTrace();
             Timber.d("onMessageReceived Error: %s", e.getLocalizedMessage());
@@ -133,7 +148,10 @@
         intent.putExtra(AppUtils.CALL_ID, callId);
         intent.putExtra(AppUtils.ICON, image);
         intent.putExtra(AppUtils.DOCTOR_NAME, doctorName);
-        /*myIntent.setAction("myReceiver");
+        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+        startActivity(intent);
+
+          /*myIntent.setAction("myReceiver");
         myIntent.putExtra("roomName", roomName);
         myIntent.putExtra("accessToken", twillioAccessToken);
         myIntent.putExtra("message", msg);
@@ -141,14 +159,11 @@
         myIntent.putExtra("profilePhotoPath", profilePhotoPath);
         myIntent.putExtra("doctorName", doctorName);*/
 
-        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
-        startActivity(intent);
-
     }
 
-    public void createNotification(String title, String msg, String roomName, int type, String twillioAccessToken, String profilePhotoPath, String doctorName, String appointmentId, String deepLink) {
+    public void createNotification(String title, String msg, String type, String appointmentId, String deepLink) {
 
-        if (type == 1) {
+  /*      if (type == 1) {
 
             Intent myIntent = new Intent(this, WakefulBroadcasterReceiver.class);
             myIntent.setAction("myReceiver");
@@ -165,84 +180,79 @@
             videoCall.startVideo();
 
 
-        } else {
-            Log.d(TAG, "createNotification: in Type ");
-
-            Bundle bundle = new Bundle();
-            if (type == 4) {
-                directionId = R.id.homeIsolationRequestDetailFragment;
-                bundle.putString("id", appointmentId);
-            } else {
-                directionId = R.id.appointmentDetailFragment;
-                bundle.putString("appointmentId", appointmentId);
-            }
-            PendingIntent pendingIntent = new NavDeepLinkBuilder(PatientDashboard.getInstance())
-                    .setGraph(R.navigation.nav_graph)
-                    .setDestination(directionId)
-                    .setArguments(bundle)
-                    .createPendingIntent();
+        } else {*/
+        Bundle bundle = new Bundle();
+        if (type.equals("4")) {
+            directionId = R.id.homeIsolationRequestDetailFragment;
+            bundle.putString("id", appointmentId);
+        } else {
+            directionId = R.id.appointmentDetailFragment;
+            bundle.putString("appointmentId", appointmentId);
+        }
+        PendingIntent pendingIntent = new NavDeepLinkBuilder(PatientDashboard.getInstance())
+                .setGraph(R.navigation.nav_graph)
+                .setDestination(directionId)
+                .setArguments(bundle)
+                .createPendingIntent();
 
-            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
-                Log.d(TAG, "createNotification: ");
-                NotificationChannel androidChannel = new NotificationChannel(CHANNEL_ID,
-                        title, NotificationManager.IMPORTANCE_HIGH);
-                androidChannel.enableLights(true);
-                androidChannel.enableVibration(true);
-                androidChannel.setLightColor(Color.GREEN);
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
+            NotificationChannel androidChannel = new NotificationChannel(CHANNEL_ID,
+                    title, NotificationManager.IMPORTANCE_HIGH);
+            androidChannel.enableLights(true);
+            androidChannel.enableVibration(true);
+            androidChannel.setLightColor(Color.GREEN);
 
-                androidChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);
-                getManager().createNotificationChannel(androidChannel);
+            androidChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);
+            getManager().createNotificationChannel(androidChannel);
 
-                NotificationCompat.Builder notification = new NotificationCompat.Builder(getApplicationContext(), CHANNEL_ID)
-                        .setSmallIcon(R.mipmap.ic_launcher)
-                        .setContentTitle(title)
-                        .setContentText(msg)
-                        .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
-                        .setAutoCancel(true) //remove notification after click
-                        .setContentIntent(pendingIntent);
+            NotificationCompat.Builder notification = new NotificationCompat.Builder(getApplicationContext(), CHANNEL_ID)
+                    .setSmallIcon(R.mipmap.ic_launcher)
+                    .setContentTitle(title)
+                    .setContentText(msg)
+                    .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
+                    .setAutoCancel(true) //remove notification after click
+                    .setContentIntent(pendingIntent);
 
-                if (bitmap != null) {
-                    notification.setLargeIcon(bitmap);
-                }
+            if (bitmap != null) {
+                notification.setLargeIcon(bitmap);
+            }
 
-                //int timestamp = 1000;
-                int timestamp = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);
+            //int timestamp = 1000;
+            int timestamp = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);
 
-                getManager().notify(timestamp, notification.build());
+            getManager().notify(timestamp, notification.build());
 
-                playNotificationSound();
+            playNotificationSound();
 
-            } else {
-                Log.d(TAG, "createNotification: else");
-                try {
-
-                    playNotificationSound();
-                    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(context)
-                            .setSmallIcon(R.mipmap.ic_launcher)
-                            .setContentTitle(title)
-                            .setContentText(msg)
-                            .setAutoCancel(true)
-                            .setPriority(NotificationCompat.PRIORITY_HIGH)
-                            .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
-                            .setContentIntent(pendingIntent)
-                            .setDefaults(Notification.DEFAULT_ALL)
-                            .setLights(0xFF760193, 300, 1000)
-                            .setVibrate(new long[]{200, 400});
+        } else {
+            try {
+                playNotificationSound();
+                NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(context)
+                        .setSmallIcon(R.mipmap.ic_launcher)
+                        .setContentTitle(title)
+                        .setContentText(msg)
+                        .setAutoCancel(true)
+                        .setPriority(NotificationCompat.PRIORITY_HIGH)
+                        .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
+                        .setContentIntent(pendingIntent)
+                        .setDefaults(Notification.DEFAULT_ALL)
+                        .setLights(0xFF760193, 300, 1000)
+                        .setVibrate(new long[]{200, 400});
 
-                    if (bitmap != null) {
-                        notificationBuilder.setLargeIcon(bitmap);
-                    }
-                    int timestamp = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);
-                    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
-                    notificationManager.notify(timestamp, notificationBuilder.build());
-                } catch (SecurityException se) {
-                    se.printStackTrace();
-                    Log.d(TAG, "createNotification: " + se.getLocalizedMessage());
-                }
-            }
+                if (bitmap != null) {
+                    notificationBuilder.setLargeIcon(bitmap);
+                }
+                int timestamp = (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE);
+                NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
+                notificationManager.notify(timestamp, notificationBuilder.build());
+            } catch (SecurityException se) {
+                se.printStackTrace();
+                Log.d(TAG, "createNotification: " + se.getLocalizedMessage());
+            }
+        }
 
 
-        }
+        //  }
 
     }
 
Index: app/src/main/java/com/digidoctor/android/newVideoCall/IncomingCallActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.newVideoCall;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Ringtone;\r\nimport android.media.RingtoneManager;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.databinding.DataBindingUtil;\r\n\r\nimport com.digidoctor.android.R;\r\nimport com.digidoctor.android.databinding.ActivityIncomingCallBinding;\r\nimport com.digidoctor.android.utility.App;\r\nimport com.digidoctor.android.utility.AppUtils;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport es.dmoral.toasty.Toasty;\r\n\r\npublic class IncomingCallActivity extends AppCompatActivity {\r\n\r\n    private static final String TAG = \"IncomingCallActivity\";\r\n    Ringtone r;\r\n\r\n    ActivityIncomingCallBinding binding;\r\n    String callId, icon, doctorName;\r\n    FirebaseFirestore firebaseFirestore;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_incoming_call);\r\n\r\n\r\n        callId = getIntent().getStringExtra(AppUtils.CALL_ID);\r\n        icon = getIntent().getStringExtra(AppUtils.ICON);\r\n        doctorName = getIntent().getStringExtra(AppUtils.DOCTOR_NAME);\r\n\r\n        firebaseFirestore = FirebaseFirestore.getInstance();\r\n        binding.btnAcptCall.setOnClickListener(v -> acceptIncomingCall());\r\n        binding.btnRejectCall.setOnClickListener(v -> rejectIncomingCall());\r\n\r\n        binding.setIcon(icon);\r\n        binding.setDrName(doctorName);\r\n\r\n\r\n        listenForReaTimeCallStatus();\r\n    }\r\n\r\n    private void listenForReaTimeCallStatus() {\r\n        firebaseFirestore.collection(AppUtils.VIDEO_CALLS_DEMO)\r\n                .document(callId)\r\n                .addSnapshotListener(this,(value, error) -> {\r\n                    if (null == error && null != value) {\r\n                        String callStatus = value.getString(AppUtils.CALL_STATUS);\r\n                        if (null != callStatus && !TextUtils.isEmpty(callStatus)) {\r\n                            if (callStatus.equalsIgnoreCase(AppUtils.CALL_DISCONNECTED)) {\r\n                                Toasty.error(App.context, \"Call Rejected !!\", Toast.LENGTH_SHORT).show();\r\n                                stopSound();\r\n                                finish();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void rejectIncomingCall() {\r\n        binding.getRoot().setAnimation(AppUtils.slideDown(this));\r\n        Toasty.error(App.context, \"Call Rejected !!\", Toast.LENGTH_SHORT).show();\r\n        updateCallStatus(AppUtils.CALL_REJECT);\r\n        stopSound();\r\n        finish();\r\n    }\r\n\r\n    private void updateCallStatus(String status) {\r\n        Log.d(TAG, \"updateCallStatus: \"+callId);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(AppUtils.CALL_STATUS, status);\r\n        if (status.equalsIgnoreCase(AppUtils.CALL_REJECT))\r\n            map.put(AppUtils.CALL_REJECTED_BY, \"patient\");\r\n        firebaseFirestore.collection(AppUtils.VIDEO_CALLS_DEMO)\r\n                .document(callId)\r\n                .update(map)\r\n                .addOnFailureListener(e -> Log.d(TAG, \"onFailure: \" + e.getLocalizedMessage()));\r\n    }\r\n\r\n\r\n    private void acceptIncomingCall() {\r\n        stopSound();\r\n        Toasty.success(App.context, \"Call Accepted !!\", Toast.LENGTH_SHORT).show();\r\n        updateCallStatus(AppUtils.CALL_ACCEPT);\r\n        startActivity(new Intent(this, JitsiVideoCallActivity.class)\r\n                .putExtra(AppUtils.ROOM_CODE, callId));\r\n        finish();\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        playNotificationSound();\r\n        updateCallStatus(AppUtils.CALL_RINGING);\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        stopSound();\r\n    }\r\n\r\n    private void stopSound() {\r\n        if (null != r)\r\n            r.stop();\r\n    }\r\n\r\n    public void playNotificationSound() {\r\n        try {\r\n            Uri notificationSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);\r\n            r = RingtoneManager.getRingtone(this, notificationSoundUri);\r\n            r.play();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/newVideoCall/IncomingCallActivity.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/newVideoCall/IncomingCallActivity.java	(date 1626090480444)
@@ -1,9 +1,6 @@
 package com.digidoctor.android.newVideoCall;
 
 import android.content.Intent;
-import android.media.Ringtone;
-import android.media.RingtoneManager;
-import android.net.Uri;
 import android.os.Bundle;
 import android.text.TextUtils;
 import android.util.Log;
@@ -23,14 +20,23 @@
 
 import es.dmoral.toasty.Toasty;
 
+import static com.digidoctor.android.newVideoCall.LocalNotification.cancelCallRingingNotification;
+import static com.digidoctor.android.newVideoCall.LocalNotification.showCallOnProgressNotification;
+import static com.digidoctor.android.newVideoCall.LocalNotification.showCallRingingNotification;
+import static com.digidoctor.android.utility.NotificationVideoCall.playNotificationSound;
+import static com.digidoctor.android.utility.NotificationVideoCall.player;
+import static com.digidoctor.android.utility.NotificationVideoCall.stopSound;
+
+
 public class IncomingCallActivity extends AppCompatActivity {
 
     private static final String TAG = "IncomingCallActivity";
-    Ringtone r;
 
     ActivityIncomingCallBinding binding;
     String callId, icon, doctorName;
     FirebaseFirestore firebaseFirestore;
+    String callStatus = AppUtils.CALL_RINGING;
+    LocalNotification localNotification;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -42,9 +48,15 @@
         icon = getIntent().getStringExtra(AppUtils.ICON);
         doctorName = getIntent().getStringExtra(AppUtils.DOCTOR_NAME);
 
+
+        localNotification = new LocalNotification(this, callId, doctorName, icon);
+
         firebaseFirestore = FirebaseFirestore.getInstance();
-        binding.btnAcptCall.setOnClickListener(v -> acceptIncomingCall());
-        binding.btnRejectCall.setOnClickListener(v -> rejectIncomingCall());
+        binding.ivAcceptCall.setOnClickListener(v -> {
+            callStatus = AppUtils.CALL_ACCEPT;
+            acceptIncomingCall();
+        });
+        binding.ivDeclineCall.setOnClickListener(v -> rejectIncomingCall());
 
         binding.setIcon(icon);
         binding.setDrName(doctorName);
@@ -56,12 +68,14 @@
     private void listenForReaTimeCallStatus() {
         firebaseFirestore.collection(AppUtils.VIDEO_CALLS_DEMO)
                 .document(callId)
-                .addSnapshotListener(this,(value, error) -> {
+                .addSnapshotListener(this, (value, error) -> {
                     if (null == error && null != value) {
                         String callStatus = value.getString(AppUtils.CALL_STATUS);
+                        this.callStatus = callStatus;
                         if (null != callStatus && !TextUtils.isEmpty(callStatus)) {
-                            if (callStatus.equalsIgnoreCase(AppUtils.CALL_DISCONNECTED)) {
-                                Toasty.error(App.context, "Call Rejected !!", Toast.LENGTH_SHORT).show();
+                            if (callStatus.equalsIgnoreCase(AppUtils.CALL_DISCONNECTED) || callStatus.equalsIgnoreCase(AppUtils.CALL_MISSED)) {
+                                Log.d(TAG, "listenForReaTimeCallStatus: " + callStatus);
+                                Toasty.error(App.context, "Call  " + callStatus + " !!", Toast.LENGTH_SHORT).show();
                                 stopSound();
                                 finish();
                             }
@@ -71,6 +85,7 @@
     }
 
     private void rejectIncomingCall() {
+        cancelCallRingingNotification(this);
         binding.getRoot().setAnimation(AppUtils.slideDown(this));
         Toasty.error(App.context, "Call Rejected !!", Toast.LENGTH_SHORT).show();
         updateCallStatus(AppUtils.CALL_REJECT);
@@ -79,7 +94,6 @@
     }
 
     private void updateCallStatus(String status) {
-        Log.d(TAG, "updateCallStatus: "+callId);
         Map<String, Object> map = new HashMap<>();
         map.put(AppUtils.CALL_STATUS, status);
         if (status.equalsIgnoreCase(AppUtils.CALL_REJECT))
@@ -88,6 +102,7 @@
                 .document(callId)
                 .update(map)
                 .addOnFailureListener(e -> Log.d(TAG, "onFailure: " + e.getLocalizedMessage()));
+
     }
 
 
@@ -95,6 +110,7 @@
         stopSound();
         Toasty.success(App.context, "Call Accepted !!", Toast.LENGTH_SHORT).show();
         updateCallStatus(AppUtils.CALL_ACCEPT);
+        Log.d(TAG, "acceptIncomingCall: " + callId);
         startActivity(new Intent(this, JitsiVideoCallActivity.class)
                 .putExtra(AppUtils.ROOM_CODE, callId));
         finish();
@@ -105,7 +121,14 @@
     @Override
     protected void onStart() {
         super.onStart();
-        playNotificationSound();
+        if (null == player)
+            playNotificationSound();
+        else if (player.isPlaying()) {
+            player.stop();
+            playNotificationSound();
+        }
+
+
         updateCallStatus(AppUtils.CALL_RINGING);
 
     }
@@ -113,21 +136,14 @@
     @Override
     protected void onStop() {
         super.onStop();
-        stopSound();
-    }
-
-    private void stopSound() {
-        if (null != r)
-            r.stop();
+        //stopSound();
+        if (callStatus.equalsIgnoreCase(AppUtils.CALL_RINGING)) {
+            showCallRingingNotification("Incoming Video Call", doctorName, this);
+        }
+        else if (callStatus.equalsIgnoreCase(AppUtils.CALL_MISSED))
+            LocalNotification.showMissedCallNotification(this);
+        finish();
     }
 
-    public void playNotificationSound() {
-        try {
-            Uri notificationSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
-            r = RingtoneManager.getRingtone(this, notificationSoundUri);
-            r.play();
-        } catch (Exception e) {
-            e.printStackTrace();
-        }
-    }
+
 }
\ No newline at end of file
Index: app/src/main/res/drawable/accepted_video_icon.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/accepted_video_icon.xml	(date 1626087497804)
+++ app/src/main/res/drawable/accepted_video_icon.xml	(date 1626087497804)
@@ -0,0 +1,12 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="52dp"
+    android:height="52dp"
+    android:viewportWidth="52"
+    android:viewportHeight="52">
+  <path
+      android:pathData="M26,26m-26,0a26,26 0,1 1,52 0a26,26 0,1 1,-52 0"
+      android:fillColor="#5fb45f"/>
+  <path
+      android:pathData="M14.3097,17.5779A1.7652,1.7652 119.9911,0 0,13.4117 19.3108,16.2699 16.2699,119.9911 0,0 14.2861,22.0429 20.1474,20.1474 119.9911,0 0,21.4186 30.9074a29.2515,29.2515 119.9911,0 0,2.9633 1.7102,20.1474 20.1474,119.9911 0,0 11.2437,1.7412 16.3389,16.3389 119.9911,0 0,2.8108 -0.6118A1.7712,1.7712 119.9911,0 0,39.4778 32.0472c-0.0099,-0.1527 -0.2001,-0.9279 -0.571,-2.3113 -0.5957,-2.2218 -0.6339,-2.3296 -0.9425,-2.6693a1.8642,1.8642 119.9911,0 0,-0.7679 -0.4775,2.2683 2.2683,119.9911 0,0 -1.274,0.0527 13.4626,13.4626 119.9911,0 1,-3.2837 0.3389,2.2783 2.2783,119.9911 0,0 -0.9972,0.1079 1.2071,1.2071 119.9911,0 0,-0.6079 0.3318c-0.1324,0.1204 -0.6804,0.7913 -1.2245,1.4963S28.8036,30.1979 28.7872,30.2023a14.9308,14.9308 119.9911,0 1,-1.5467 -0.4199,13.2516 13.2516,79.4148 0,1 -5.4953,-3.4377c-0.3709,-0.3717 -0.4441,-0.4629 -0.4191,-0.5358 0.014,-0.0483 0.2933,-0.7444 0.6205,-1.5476s0.6195,-1.5515 0.6444,-1.6555a2.2003,2.2003 119.9911,0 0,0.0506 -0.4754,2.3003 2.3003,119.9911 0,0 -0.4943,-1.2488 13.1526,13.1526 119.9911,0 1,-1.2872 -2.8969A2.6103,2.6103 119.9911,0 0,20.2782 16.8216,1.8502 1.8502,119.9911 0,0 18.9247,16.323C18.5807,16.3489 14.5575,17.44 14.3097,17.5779Z"
+      android:fillColor="#fff"/>
+</vector>
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.digidoctor.android\">\r\n\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n\r\n    <uses-permission\r\n        android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"\r\n        tools:ignore=\"ScopedStorage\" />\r\n    <uses-permission android:name=\"android.permission.BLUETOOTH_ADMIN\" />\r\n    <uses-permission android:name=\"android.permission.REORDER_TASKS\" />\r\n    <uses-permission android:name=\"android.permission.RECORD_AUDIO\" />\r\n    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\r\n    <uses-permission android:name=\"android.permission.USE_FULL_SCREEN_INTENT\" />\r\n    <uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\" />\r\n    <uses-permission android:name=\"android.permission.SET_ALARM\" />\r\n    <uses-permission android:name=\"com.android.alarm.permission.SET_ALARM\" />\r\n\r\n\r\n    <application\r\n        android:name=\".utility.App\"\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:largeHeap=\"true\"\r\n        android:networkSecurityConfig=\"@xml/network_security_config\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:screenOrientation=\"portrait\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/MyAppTheme\"\r\n        tools:replace=\"android:theme\">\r\n        <activity android:name=\".VideoCallActivity.VideoActivity\" />\r\n        <activity\r\n            android:name=\".VideoCallActivity.CallReceiveActivity\"\r\n            android:screenOrientation=\"portrait\" />\r\n        <activity\r\n            android:name=\".view.activity.SignUpJourneyActivity\"\r\n            android:label=\"@string/title_activity_tabbed_demo\"\r\n            android:screenOrientation=\"portrait\"\r\n            android:theme=\"@style/AppTheme.NoToolbar\" />\r\n        <activity\r\n            android:name=\".view.activity.PatientDashboard\"\r\n            android:screenOrientation=\"portrait\">\r\n            <nav-graph android:value=\"@navigation/nav_graph\" />\r\n            <meta-data\r\n                android:name=\"android.app.searchable\"\r\n                android:resource=\"@xml/searchable\" />\r\n\r\n\r\n            <!-- Branch URI Scheme -->\r\n            <intent-filter>\r\n                <data android:scheme=\"yourapp\" />\r\n                <action android:name=\"android.intent.action.VIEW\" />\r\n\r\n                <category android:name=\"android.intent.category.DEFAULT\" />\r\n                <category android:name=\"android.intent.category.BROWSABLE\" />\r\n            </intent-filter>\r\n\r\n            <!-- Branch App Links (optional) -->\r\n            <intent-filter\r\n                android:autoVerify=\"true\"\r\n                tools:targetApi=\"m\">\r\n                <action android:name=\"android.intent.action.VIEW\" />\r\n\r\n                <category android:name=\"android.intent.category.DEFAULT\" />\r\n                <category android:name=\"android.intent.category.BROWSABLE\" />\r\n\r\n                <data\r\n                    android:host=\"example.app.link\"\r\n                    android:scheme=\"https\" />\r\n                <!-- example-alternate domain is required for App Links when the Journeys/Web SDK and Deepviews are used inside your website.  -->\r\n                <data\r\n                    android:host=\"example-alternate.app.link\"\r\n                    android:scheme=\"https\" />\r\n            </intent-filter>\r\n\r\n        </activity>\r\n        <activity\r\n            android:name=\".view.activity.SplashScreen\"\r\n            android:theme=\"@style/AppTheme.NoToolbar\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity\r\n            android:name=\".utility.ImagePickerActivity\"\r\n            android:screenOrientation=\"portrait\" />\r\n        <activity android:name=\"com.digidoctor.android.view.activity.MedCheckDeviceGetData\" />\r\n        <activity android:name=\".newVideoCall.IncomingCallActivity\"\r\n            android:theme=\"@style/AppTheme.NoToolbar\"/>\r\n        <activity android:name=\".jitsiVideoCall.VideoCallActivity\" />\r\n        <activity android:name=\"com.digidoctor.android.view.activity.DeviceConnectionActivity\" />\r\n        <activity android:name=\"com.digidoctor.android.view.activity.ViaOximeterScanActivity\" />\r\n        <activity android:name=\"com.digidoctor.android.view.activity.DataActivity\" />\r\n        <activity android:name=\"com.digidoctor.android.view.activity.DeviceScanActivity\" />\r\n        <activity android:name=\"com.digidoctor.android.view.activity.DeviceConnectScanActivity\" />\r\n        <activity android:name=\".newVideoCall.JitsiVideoCallActivity\" />\r\n        <activity android:name=\".view.activity.DeviceControlActivity\" />\r\n\r\n\r\n        <service android:name=\".utility.GetAddressIntentService\" />\r\n\r\n        <service\r\n            android:name=\".utility.FirebaseMessageService\"\r\n            android:exported=\"false\">\r\n            <intent-filter>\r\n                <action android:name=\"com.google.firebase.MESSAGING_EVENT\" />\r\n            </intent-filter>\r\n        </service>\r\n\r\n\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <meta-data\r\n            android:name=\"io.branch.sdk.BranchKey\"\r\n            android:value=\"key_live_dhYiqeGuLRtNQ8OJlDZ3skfetDdT6vpa\" />\r\n        <meta-data\r\n            android:name=\"io.branch.sdk.BranchKey.test\"\r\n            android:value=\"key_test_jk3fvfKqJGqLV3GKdB0YKidaDxkT1yiB\" />\r\n        <meta-data\r\n            android:name=\"io.branch.sdk.TestMode\"\r\n            android:value=\"true\" />\r\n        <!-- Set to true to use Branch_Test_Key (useful when simulating installs and/or switching between debug and production flavors) -->\r\n\r\n        <provider\r\n            android:name=\"androidx.core.content.FileProvider\"\r\n            android:authorities=\"${applicationId}.provider\"\r\n            android:exported=\"false\"\r\n            android:grantUriPermissions=\"true\">\r\n            <meta-data\r\n                android:name=\"android.support.FILE_PROVIDER_PATHS\"\r\n                android:resource=\"@xml/provider_paths\" />\r\n        </provider>\r\n\r\n        <service\r\n            android:name=\".blueTooth.BluetoothLeService1\"\r\n            android:enabled=\"true\" />\r\n\r\n        <receiver android:name=\".utility.OTPReceiver\">\r\n            <intent-filter>\r\n                <action android:name=\"android.provider.Telephony.SMS_RECEIVED\" />\r\n            </intent-filter>\r\n        </receiver>\r\n\r\n        <receiver android:name=\".broadcast.VideoCallActionBroadcast\">\r\n            <intent-filter>\r\n                <action android:name=\"com.jc_code_ACTION_CALL\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </receiver>\r\n\r\n        <receiver android:name=\".broadcast.InternetBroadcastReceiver\" />\r\n        <receiver\r\n            android:name=\".utility.WakefulBroadcasterReceiver\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"myReceiver\" />\r\n            </intent-filter>\r\n        </receiver>\r\n        <receiver android:name=\".utility.AlarmBroadcastReceiver\" />\r\n        <receiver\r\n            android:name=\".BluetoothBroadcastReceiver\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"myReceiver2\" />\r\n            </intent-filter>\r\n        </receiver>\r\n    </application>\r\n</manifest>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/AndroidManifest.xml	(date 1626078470868)
@@ -10,7 +10,6 @@
     <uses-permission android:name="android.permission.CAMERA" />
     <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
     <uses-permission android:name="android.permission.CAMERA" />
-    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
 
     <uses-permission
         android:name="android.permission.WRITE_EXTERNAL_STORAGE"
@@ -25,6 +24,12 @@
     <uses-permission android:name="com.android.alarm.permission.SET_ALARM" />
 
 
+    <uses-permission android:name="android.permission.USE_FULL_SCREEN_INTENT" />
+    <uses-permission android:name="android.permission.WAKE_LOCK" />
+    <uses-permission android:name="android.permission.USE_FULL_SCREEN_INTENT" />
+    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
+
+
     <application
         android:name=".utility.App"
         android:allowBackup="true"
@@ -96,8 +101,9 @@
             android:name=".utility.ImagePickerActivity"
             android:screenOrientation="portrait" />
         <activity android:name="com.digidoctor.android.view.activity.MedCheckDeviceGetData" />
-        <activity android:name=".newVideoCall.IncomingCallActivity"
-            android:theme="@style/AppTheme.NoToolbar"/>
+        <activity
+            android:name=".newVideoCall.IncomingCallActivity"
+            android:theme="@style/AppTheme.NoToolbar" />
         <activity android:name=".jitsiVideoCall.VideoCallActivity" />
         <activity android:name="com.digidoctor.android.view.activity.DeviceConnectionActivity" />
         <activity android:name="com.digidoctor.android.view.activity.ViaOximeterScanActivity" />
@@ -162,6 +168,7 @@
         </receiver>
 
         <receiver android:name=".broadcast.InternetBroadcastReceiver" />
+        <receiver android:name=".newVideoCall.LocalBroadCast" />
         <receiver
             android:name=".utility.WakefulBroadcasterReceiver"
             android:enabled="true"
Index: app/src/main/res/layout/activity_incoming_call.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <data>\r\n\r\n        <variable\r\n            name=\"icon\"\r\n            type=\"String\" />\r\n\r\n        <variable\r\n            name=\"drName\"\r\n            type=\"String\" />\r\n    </data>\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:background=\"@drawable/incoming_call_gradient\">\r\n\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView52\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"100dp\"\r\n            android:fontFamily=\"@font/poppins_medium\"\r\n            android:text=\"Incoming Video Call\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"22dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView53\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:fontFamily=\"@font/poppins_medium\"\r\n            android:text=\"@{drName}\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"24sp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.492\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/imageView90\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/btnAcptCall\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:visibility=\"visible\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/btnRejectCall\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.5\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/btnRejectCall\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/btnRejectCall\"\r\n            app:srcCompat=\"@drawable/ic_baseline_call_24\" />\r\n\r\n        <com.airbnb.lottie.LottieAnimationView\r\n            android:id=\"@+id/animationView\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"@dimen/_100sdp\"\r\n            android:layout_marginTop=\"40dp\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/imageView90\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/imageView90\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView53\"\r\n            app:lottie_autoPlay=\"true\"\r\n            app:lottie_loop=\"true\"\r\n            app:lottie_rawRes=\"@raw/rcv_call\"\r\n            app:srcCompat=\"@drawable/ic_baseline_call_24\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/btnRejectCall\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"100dp\"\r\n            android:visibility=\"visible\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/btnAcptCall\"\r\n            app:layout_constraintHorizontal_bias=\"0.5\"\r\n            app:layout_constraintHorizontal_chainStyle=\"spread\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView53\"\r\n            app:srcCompat=\"@drawable/ic_baseline_call_end_24\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView90\"\r\n            android:layout_width=\"150dp\"\r\n            android:layout_height=\"150dp\"\r\n            android:layout_marginTop=\"100dp\"\r\n            android:loadDoctorImage=\"@{icon}\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/textView52\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/textView52\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView52\"\r\n            app:srcCompat=\"@drawable/ic_baseline_supervised_user_circle_24\" />\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</layout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_incoming_call.xml	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/res/layout/activity_incoming_call.xml	(date 1626090919329)
@@ -1,5 +1,6 @@
 <?xml version="1.0" encoding="utf-8"?>
-<layout xmlns:android="http://schemas.android.com/apk/res/android"
+<layout xmlns:tools="http://schemas.android.com/tools"
+    xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto">
 
     <data>
@@ -16,18 +17,18 @@
     <androidx.constraintlayout.widget.ConstraintLayout
         android:layout_width="match_parent"
         android:layout_height="match_parent"
-        android:background="@drawable/incoming_call_gradient">
+        android:background="#F2F6FF">
 
 
         <TextView
             android:id="@+id/textView52"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
-            android:layout_marginTop="100dp"
-            android:fontFamily="@font/poppins_medium"
+            android:layout_marginTop="70dp"
+            android:fontFamily="@font/poppins"
             android:text="Incoming Video Call"
-            android:textColor="@color/white"
-            android:textSize="22dp"
+            android:textColor="#262E3F"
+            android:textSize="22sp"
             app:layout_constraintEnd_toEndOf="parent"
             app:layout_constraintStart_toStartOf="parent"
             app:layout_constraintTop_toTopOf="parent" />
@@ -37,20 +38,20 @@
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_marginTop="8dp"
-            android:fontFamily="@font/poppins_medium"
+            android:fontFamily="@font/poppins_bold"
             android:text="@{drName}"
-            android:textColor="@color/white"
+            android:textColor="#262E3F"
             android:textSize="24sp"
+            android:textStyle="bold"
             app:layout_constraintEnd_toEndOf="parent"
-            app:layout_constraintHorizontal_bias="0.492"
             app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toBottomOf="@+id/imageView90" />
+            app:layout_constraintTop_toBottomOf="@+id/animationView" />
 
         <ImageView
             android:id="@+id/btnAcptCall"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
-            android:visibility="visible"
+            android:visibility="gone"
             app:layout_constraintBottom_toBottomOf="@+id/btnRejectCall"
             app:layout_constraintEnd_toEndOf="parent"
             app:layout_constraintHorizontal_bias="0.5"
@@ -60,39 +61,95 @@
 
         <com.airbnb.lottie.LottieAnimationView
             android:id="@+id/animationView"
-            android:layout_width="0dp"
-            android:layout_height="@dimen/_100sdp"
-            android:layout_marginTop="40dp"
-            app:layout_constraintEnd_toEndOf="@+id/imageView90"
-            app:layout_constraintStart_toStartOf="@+id/imageView90"
-            app:layout_constraintTop_toBottomOf="@+id/textView53"
+            android:layout_width="200dp"
+            android:layout_height="200dp"
+            android:layout_marginTop="10dp"
+            android:background="?attr/selectableItemBackgroundBorderless"
+            android:clickable="true"
+            android:visibility="visible"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/textView52"
             app:lottie_autoPlay="true"
             app:lottie_loop="true"
-            app:lottie_rawRes="@raw/rcv_call"
+            app:lottie_rawRes="@raw/user_background_call_effect"
             app:srcCompat="@drawable/ic_baseline_call_24" />
 
         <ImageView
             android:id="@+id/btnRejectCall"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
-            android:layout_marginTop="100dp"
-            android:visibility="visible"
-            app:layout_constraintEnd_toStartOf="@+id/btnAcptCall"
+            android:layout_marginBottom="32dp"
+            android:visibility="gone"
+            app:layout_constraintBottom_toBottomOf="parent"
+            app:layout_constraintEnd_toEndOf="parent"
             app:layout_constraintHorizontal_bias="0.5"
             app:layout_constraintHorizontal_chainStyle="spread"
             app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toBottomOf="@+id/textView53"
             app:srcCompat="@drawable/ic_baseline_call_end_24" />
 
         <ImageView
             android:id="@+id/imageView90"
-            android:layout_width="150dp"
-            android:layout_height="150dp"
-            android:layout_marginTop="100dp"
+            android:layout_width="100dp"
+            android:layout_height="100dp"
             android:loadDoctorImage="@{icon}"
-            app:layout_constraintEnd_toEndOf="@+id/textView52"
-            app:layout_constraintStart_toStartOf="@+id/textView52"
-            app:layout_constraintTop_toBottomOf="@+id/textView52"
+            app:layout_constraintBottom_toBottomOf="@+id/animationView"
+            app:layout_constraintEnd_toEndOf="@+id/animationView"
+            app:layout_constraintStart_toStartOf="@+id/animationView"
+            app:layout_constraintTop_toTopOf="@+id/animationView"
             app:srcCompat="@drawable/ic_baseline_supervised_user_circle_24" />
+
+        <ImageView
+            android:id="@+id/ivDeclineCall"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginBottom="8dp"
+            android:background="?attr/selectableItemBackgroundBorderless"
+            android:clickable="true"
+            app:layout_constraintBottom_toTopOf="@+id/textView244"
+            app:layout_constraintEnd_toStartOf="@+id/ivAcceptCall"
+            app:layout_constraintHorizontal_bias="0.5"
+            app:layout_constraintStart_toStartOf="parent"
+            app:srcCompat="@drawable/video_call_disconnected_icon" />
+
+        <ImageView
+            android:id="@+id/ivAcceptCall"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:background="?attr/selectableItemBackgroundBorderless"
+            android:clickable="true"
+            app:layout_constraintBottom_toBottomOf="@+id/ivDeclineCall"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintHorizontal_bias="0.5"
+            app:layout_constraintStart_toEndOf="@+id/ivDeclineCall"
+            app:layout_constraintTop_toTopOf="@+id/ivDeclineCall"
+            app:srcCompat="@drawable/accepted_video_icon" />
+
+        <TextView
+            android:id="@+id/textView244"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginBottom="100dp"
+            android:fontFamily="@font/poppins"
+            android:text="Decline"
+            android:textColor="#CC3F4E6E"
+            android:textSize="18sp"
+            app:layout_constraintBottom_toBottomOf="parent"
+            app:layout_constraintEnd_toEndOf="@+id/ivDeclineCall"
+            app:layout_constraintStart_toStartOf="@+id/ivDeclineCall" />
+
+
+        <TextView
+
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:fontFamily="@font/poppins"
+            android:text="Accept"
+            android:textColor="#CC3F4E6E"
+            android:textSize="18sp"
+            app:layout_constraintBottom_toBottomOf="@+id/textView244"
+            app:layout_constraintEnd_toEndOf="@+id/ivAcceptCall"
+            app:layout_constraintStart_toStartOf="@+id/ivAcceptCall"
+            app:layout_constraintTop_toTopOf="@+id/textView244" />
     </androidx.constraintlayout.widget.ConstraintLayout>
 </layout>
\ No newline at end of file
Index: app/src/main/java/com/digidoctor/android/view/activity/PatientDashboard.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.view.activity;\r\n\r\nimport android.Manifest;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.net.ConnectivityManager;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.ResultReceiver;\r\nimport android.util.Log;\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.webkit.WebView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\nimport androidx.navigation.ui.NavigationUI;\r\n\r\nimport com.digidoctor.android.R;\r\nimport com.digidoctor.android.adapters.NavAdapter;\r\nimport com.digidoctor.android.broadcast.InternetBroadcastReceiver;\r\nimport com.digidoctor.android.databinding.ActivityDashBoardBinding;\r\nimport com.digidoctor.android.interfaces.NavigationInterface;\r\nimport com.digidoctor.android.model.NavModel;\r\nimport com.digidoctor.android.model.User;\r\nimport com.digidoctor.android.utility.GetAddressIntentService;\r\nimport com.digidoctor.android.utility.NotificationVideoCall;\r\nimport com.digidoctor.android.utility.WakefulBroadcasterReceiver;\r\nimport com.digidoctor.android.utility.utils;\r\nimport com.digidoctor.android.view.fragments.digiDoctorFragments.SearchBluetoothDeviceFragment;\r\nimport com.digidoctor.android.viewHolder.PatientViewModel;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.location.LocationCallback;\r\nimport com.google.android.gms.location.LocationRequest;\r\nimport com.google.android.gms.location.LocationResult;\r\nimport com.google.android.gms.location.LocationServices;\r\nimport com.grisoftware.updatechecker.GoogleChecker;\r\nimport com.payu.base.models.ErrorResponse;\r\nimport com.payu.checkoutpro.utils.PayUCheckoutProConstants;\r\nimport com.payu.ui.model.listeners.PayUCheckoutProListener;\r\nimport com.razorpay.PaymentData;\r\nimport com.razorpay.PaymentResultWithDataListener;\r\n\r\nimport org.jetbrains.annotations.NotNull;\r\nimport org.jetbrains.annotations.Nullable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Objects;\r\n\r\nimport static com.digidoctor.android.utility.AppUtils.hideDialog;\r\nimport static com.digidoctor.android.utility.AppUtils.shareApp;\r\nimport static com.digidoctor.android.utility.AppUtils.showRequestDialog;\r\nimport static com.digidoctor.android.utility.utils.getPrimaryUser;\r\nimport static com.digidoctor.android.view.fragments.digiDoctorFragments.BookAppointmentFragment.bookAppointment;\r\nimport static com.digidoctor.android.view.fragments.digiDoctorFragments.PatientDashboardFragment.dashboard2Binding;\r\nimport static com.digidoctor.android.view.fragments.digiDoctorFragments.SearchBluetoothDeviceFragment.REQUEST_ENABLE_BT;\r\nimport static com.digidoctor.android.view.fragments.lab.FragmentReviewOrderLab.payment;\r\n\r\npublic class PatientDashboard extends AppCompatActivity implements PaymentResultWithDataListener, NavigationInterface, PayUCheckoutProListener {\r\n    private static final int LOCATION_PERMISSION_REQUEST_CODE = 101;\r\n    ActivityDashBoardBinding mainBinding;\r\n\r\n    NavController navController;\r\n\r\n    User user;\r\n    String lat, lng;\r\n\r\n\r\n    private static final String TAG = \"PatientDashboard\";\r\n\r\n\r\n    InternetBroadcastReceiver broadcastReceiver = new InternetBroadcastReceiver();\r\n\r\n    public static PatientDashboard instance;\r\n\r\n\r\n    public static PatientDashboard getInstance() {\r\n        return instance;\r\n    }\r\n\r\n    public String cityName;\r\n    public String areaName;\r\n\r\n    NavAdapter navAdapter;\r\n    List<NavModel> navModels;\r\n\r\n    MenuItem cartItem = null;\r\n    MenuItem favouriteItem = null;\r\n    MenuItem searchItem = null;\r\n\r\n    int cartCounter = 0;\r\n    int favouriteCounter = 0;\r\n    TextView cartTv, favouriteTv;\r\n\r\n    PatientViewModel viewModel;\r\n\r\n    public String getCityName() {\r\n        if (cityName == null)\r\n            return \"\";\r\n        else return cityName;\r\n    }\r\n\r\n    public void setCityName(String cityName) {\r\n        this.cityName = cityName;\r\n    }\r\n\r\n    public String getAreaName() {\r\n        if (areaName == null)\r\n            return \"\";\r\n        else return areaName;\r\n    }\r\n\r\n    public void setAreaName(String areaName) {\r\n        this.areaName = areaName;\r\n    }\r\n\r\n    private FusedLocationProviderClient fusedLocationClient;\r\n    private LocationAddressResultReceiver addressResultReceiver;\r\n    private Location currentLocation;\r\n    private LocationCallback locationCallback;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        mainBinding = DataBindingUtil.setContentView(this, R.layout.activity_dash_board);\r\n\r\n        instance = this;\r\n\r\n        //Register Broadcast Receiver\r\n        registerBroadcast();\r\n\r\n        user = getPrimaryUser(getInstance());\r\n\r\n        navController = Navigation.findNavController(this, R.id.nav_host_fragment);\r\n\r\n        NavigationUI.setupActionBarWithNavController(this, navController);\r\n\r\n\r\n        Objects.requireNonNull(getSupportActionBar()).hide();\r\n\r\n        addressResultReceiver = new LocationAddressResultReceiver(new Handler());\r\n        fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\r\n        locationCallback = new LocationCallback() {\r\n            @Override\r\n            public void onLocationResult(LocationResult locationResult) {\r\n                currentLocation = locationResult.getLocations().get(0);\r\n                getAddress();\r\n            }\r\n        };\r\n        startLocationUpdates();\r\n\r\n        viewModel = new ViewModelProvider(this).get(PatientViewModel.class);\r\n        setNavRec();\r\n\r\n\r\n\r\n/*        ApiUtils.getcartcountutils(this, new ApiCallbackInterface() {\r\n            @Override\r\n            public void onSuccess(List<?> o) {\r\n                List<CartCount.CartcountList> CartcountList = (List<CartCount.CartcountList>) o;\r\n                if (null == CartcountList)\r\n                    return;\r\n                if (CartcountList.isEmpty())\r\n                    return;\r\n\r\n                Log.d(TAG, \"onSuccess: \" + CartcountList.get(0).getCartCount());\r\n                cartCounter = CartcountList.get(0).getCartCount();\r\n                updateCartCount(cartCounter);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String s) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailed(Throwable throwable) {\r\n\r\n            }\r\n        });*/\r\n\r\n        changeMenuView();\r\n\r\n       /* if (null != getIntent().getStringExtra(\"twillioAccessToken\")) {\r\n            String type = getIntent().getStringExtra(\"type\");\r\n            if (null != type && type.equals(\"1\"))\r\n                showNotification();\r\n            else Log.d(TAG, \"notificationType is not 1: \");\r\n        } else Log.d(TAG, \"notification data is null: \");*/\r\n    }\r\n\r\n    private void changeMenuView() {\r\n           /*     navController.addOnDestinationChangedListener((controller, destination, arguments) -> {\r\n            if (null != searchItem)\r\n                searchItem.setVisible(destination.getId() == R.id.onlinePharmacyFragment);\r\n            if (null != cartItem)\r\n                cartItem.setVisible(destination.getId() != R.id.cart_Details_Fragment);\r\n\r\n            if (null != searchItem && null != cartItem && null != favouriteItem) {\r\n                switch (destination.getId()) {\r\n                    case R.id.updateSymptomsFragment:\r\n                    case R.id.symptomTrackerFragment:\r\n                    case R.id.appointmentsFragment:\r\n                    case R.id.appointmentDetailFragment:\r\n                    case R.id.symptomsFragment2:\r\n                    case R.id.recommendedDoctorsFragment:\r\n                    case R.id.doctorShortProfileFragment:\r\n                    case R.id.prescriptionHistoryFragment:\r\n                    case R.id.addPrescriptionManuallyFragment:\r\n                    case R.id.chooseTimeFragment2:\r\n                    case R.id.bookAppointmentFragment:\r\n                    case R.id.profileFragment:\r\n                    case R.id.visitFragment:\r\n                    case R.id.fragmentCartListLab:\r\n                    case R.id.testDetailsFRagment:\r\n                    case R.id.homeIsolationFragment:\r\n                    case R.id.homeIsolationRequestListFragment:\r\n                    case R.id.homeIsolationRequestDetailFragment:\r\n                    case R.id.medicineReminderListFragment:\r\n                    case R.id.stethAndLaryngoDataFragment:\r\n                    case R.id.chooseVitalHistoryTypeFragment:\r\n                    case R.id.chatForAppointmentFragment:\r\n                    case R.id.videoFragmentFragment:\r\n                    case R.id.patientInvestigationReportFragment:\r\n                    case R.id.investigationFragment:\r\n                    case R.id.emergencySpecialityFragment:\r\n                    case R.id.addMemberFragment:\r\n                        hideAllItem();\r\n                        break;\r\n\r\n                    case R.id.timeSlotForLabFragment:\r\n                        hideFavouriteIcon();\r\n\r\n\r\n                }\r\n            }\r\n        });*/\r\n    }\r\n\r\n\r\n    private void hideFavouriteIcon() {\r\n        searchItem.setVisible(false);\r\n        cartItem.setVisible(true);\r\n        favouriteItem.setVisible(false);\r\n    }\r\n\r\n    private void hideAllItem() {\r\n        searchItem.setVisible(false);\r\n        cartItem.setVisible(false);\r\n        favouriteItem.setVisible(false);\r\n    }\r\n\r\n    private void showNotification() {\r\n       /* String type = getIntent().getStringExtra(\"type\");\r\n        if (type.equalsIgnoreCase(\"4\")) {\r\n\r\n        } else {\r\n\r\n        }*/\r\n        Intent myIntent = new Intent(this, WakefulBroadcasterReceiver.class);\r\n        myIntent.setAction(\"myReceiver\");\r\n        myIntent.putExtra(\"roomName\", getIntent().getStringExtra(\"roomName\"));\r\n        myIntent.putExtra(\"accessToken\", getIntent().getStringExtra(\"twillioAccessToken\"));\r\n        myIntent.putExtra(\"message\", getIntent().getStringExtra(\"msg\"));\r\n        myIntent.putExtra(\"title\", getIntent().getStringExtra(\"title\"));\r\n        myIntent.putExtra(\"profilePhotoPath\", getIntent().getStringExtra(\"profilePhotoPath\"));\r\n        myIntent.putExtra(\"doctorName\", getIntent().getStringExtra(\"doctorName\"));\r\n        sendBroadcast(myIntent);\r\n    }\r\n\r\n    private void registerBroadcast() {\r\n        //Create Intent Filter here\r\n        IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        registerReceiver(broadcastReceiver, filter);\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        unregisterReceiver(broadcastReceiver);\r\n    }\r\n\r\n    public void updateUser() {\r\n        user = getPrimaryUser(this);\r\n        mainBinding.setUser(user);\r\n    }\r\n\r\n    private void setNavRec() {\r\n        mainBinding.imageView6.setVisibility(user.getIsExists() == 0 ? View.GONE : View.VISIBLE);\r\n        mainBinding.setUser(getPrimaryUser(this));\r\n        navModels = new ArrayList<>();\r\n        navAdapter = new NavAdapter(navModels, PatientDashboard.this);\r\n        mainBinding.navRec.setAdapter(navAdapter);\r\n\r\n\r\n        viewModel.getMenuData().observe(this, navModels -> {\r\n            this.navModels.addAll(navModels);\r\n            Log.d(TAG, \"setNavRec: \" + navModels.toString());\r\n            navAdapter.notifyDataSetChanged();\r\n\r\n        });\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        mainBinding.textView14.setOnClickListener(view -> {\r\n                    navController.navigate(R.id.profileFragment);\r\n                    closeDrawer();\r\n                }\r\n        );\r\n\r\n        mainBinding.changeMemberLay.setOnClickListener(view -> {\r\n            closeDrawer();\r\n            if (user.getIsExists() == 1) {\r\n                Bundle mBundle = new Bundle();\r\n                mBundle.putString(\"FROM\", \"DashboardFragment\");\r\n                navController.navigate(R.id.showMemberListFragment, mBundle);\r\n            } else {\r\n                navController.navigate(R.id.profileFragment);\r\n            }\r\n        });\r\n        mainBinding.imageView45.setOnClickListener(view -> {\r\n            closeDrawer();\r\n            if (user.getIsExists() == 1) {\r\n                Bundle mBundle = new Bundle();\r\n                mBundle.putString(\"FROM\", \"DashboardFragment\");\r\n                navController.navigate(R.id.showMemberListFragment, mBundle);\r\n            } else {\r\n                navController.navigate(R.id.profileFragment);\r\n            }\r\n        });\r\n\r\n        checkForUpdate();\r\n\r\n        if (getIntent().hasExtra(\"action\")) {\r\n            if (getIntent().getStringExtra(\"action\").equalsIgnoreCase(\"callHistory\")) {\r\n                navController.navigate(R.id.videoCallHistoryFragment);\r\n                NotificationVideoCall.cancelShowMissedCallNotification();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void checkForUpdate() {\r\n        new GoogleChecker(\"com.digidoctor.android\", PatientDashboard.this, true, \"en\");\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.main_menu, menu);\r\n\r\n        cartItem = menu.findItem(R.id.cart_Details_Fragment);\r\n        favouriteItem = menu.findItem(R.id.fragmentAllWishLIstProduct);\r\n        searchItem = menu.findItem(R.id.allProductsFragment);\r\n\r\n        View actionView = cartItem.getActionView();\r\n        View actionView2 = favouriteItem.getActionView();\r\n\r\n        cartTv = actionView.findViewById(R.id.tvCartCount);\r\n        favouriteTv = actionView2.findViewById(R.id.tvFavouriteCount);\r\n\r\n        cartTv.setText(String.valueOf(cartCounter));\r\n        favouriteTv.setText(String.valueOf(favouriteCounter));\r\n\r\n        actionView.setOnClickListener(v -> onOptionsItemSelected(cartItem));\r\n        actionView2.setOnClickListener(v -> onOptionsItemSelected(favouriteItem));\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n        return NavigationUI.onNavDestinationSelected(item, navController) || super.onOptionsItemSelected(item);\r\n    }\r\n\r\n    @Override\r\n    public boolean onSupportNavigateUp() {\r\n        try {\r\n            utils.hideSoftKeyboard(PatientDashboard.this);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return navController.navigateUp();\r\n    }\r\n\r\n    public View getView() {\r\n        return mainBinding.getRoot();\r\n    }\r\n\r\n\r\n    public void navigate(int id) {\r\n        navController.navigate(id);\r\n    }\r\n\r\n    public void navigate(int id, Bundle bundle) {\r\n        navController.navigate(id, bundle);\r\n    }\r\n\r\n\r\n    public User getUser() {\r\n        if (user == null)\r\n            user = new User();\r\n        return user;\r\n    }\r\n\r\n    public void setUser(User user) {\r\n        this.user = user;\r\n    }\r\n\r\n    @Override\r\n    public void onPaymentSuccess(String status, PaymentData paymentData) {\r\n        Toast.makeText(this, this.getString(R.string.transaction_successful), Toast.LENGTH_LONG).show();\r\n\r\n        Log.d(TAG, \"onPaymentSuccess: \" + status);\r\n\r\n        if (null != bookAppointment)\r\n            bookAppointment.startBookingAppointment(paymentData.getPaymentId());\r\n\r\n        if (null != payment)\r\n            try {\r\n                payment.paymentSuccess();\r\n            } catch (Exception e) {\r\n                payment.paymentFailed(e.getLocalizedMessage());\r\n            }\r\n\r\n        Log.d(TAG, \"onPaymentSuccessData: \" + paymentData.getData());\r\n    }\r\n\r\n    @Override\r\n    public void onPaymentError(int i, String s, PaymentData paymentData) {\r\n        Log.d(TAG, \"onPaymentError: \" + s);\r\n        Toast.makeText(instance, R.string.failed_to_book, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n\r\n    @SuppressWarnings(\"MissingPermission\")\r\n    private void startLocationUpdates() {\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) !=\r\n                PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new\r\n                            String[]{Manifest.permission.ACCESS_FINE_LOCATION},\r\n                    LOCATION_PERMISSION_REQUEST_CODE);\r\n        } else {\r\n            LocationRequest locationRequest = new LocationRequest();\r\n            locationRequest.setInterval(10000);\r\n            locationRequest.setFastestInterval(1000);\r\n            locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n            fusedLocationClient.requestLocationUpdates(locationRequest, locationCallback, null);\r\n        }\r\n    }\r\n\r\n    public String getLat() {\r\n        if (lat == null) return \"0\";\r\n        else\r\n            return lat;\r\n    }\r\n\r\n    public void setLat(String lat) {\r\n        this.lat = lat;\r\n    }\r\n\r\n    public String getLng() {\r\n        if (lng == null) return \"0\";\r\n        else\r\n            return lng;\r\n    }\r\n\r\n    public void setLng(String lng) {\r\n        this.lng = lng;\r\n    }\r\n\r\n    @SuppressWarnings(\"MissingPermission\")\r\n    private void getAddress() {\r\n        if (!Geocoder.isPresent()) {\r\n            Toast.makeText(PatientDashboard.this, \"Can't find current address, \", Toast.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n        Intent intent = new Intent(this, GetAddressIntentService.class);\r\n        intent.putExtra(\"add_receiver\", addressResultReceiver);\r\n        intent.putExtra(\"add_location\", currentLocation);\r\n        startService(intent);\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == LOCATION_PERMISSION_REQUEST_CODE) {\r\n            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                startLocationUpdates();\r\n            } else {\r\n                Toast.makeText(this, \"Location permission not granted, \" + \"restart the app if you want the feature\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onNavigationItemClicked(Object obj) {\r\n        mainBinding.drawerLayout.close();\r\n        NavModel navModel = (NavModel) obj;\r\n        if (navModel.getId() == 1) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.appointmentsFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 2) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.prescriptionHistoryFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 3) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.investigationFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 4) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.chooseVitalHistoryTypeFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 5) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.addMemberFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 6) {\r\n            //init for video Cal Screen\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.videoCallHistoryFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 7) {\r\n            //init for wallet Screen\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.walletFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 11) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.medicineReminderListFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 13) {\r\n            shareApp(\"https://digidoctor.in/invitation?invitationCode=\" + getPrimaryUser(PatientDashboard.getInstance()).getMemberId(), \"This is demo description\", this);\r\n        } else if (navModel.getId() == 14) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.symptomTrackerFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 16) {\r\n            if (isProfileFilled())\r\n                navController.navigate(R.id.homeIsolationRequestListFragment);\r\n            else navController.navigate(R.id.profileFragment);\r\n        } else if (navModel.getId() == 17) {\r\n            showRequestDialog(this);\r\n            if (utils.logout(this))\r\n                hideDialog();\r\n        } else Toast.makeText(this, getString(R.string.coming_soon), Toast.LENGTH_SHORT).show();\r\n\r\n    }\r\n\r\n    private boolean isProfileFilled() {\r\n        return user.getIsExists() == 1;\r\n    }\r\n\r\n    private void openBrowser() {\r\n       /* String url = \"http://www.example.com\";\r\n        Intent i = new Intent(Intent.ACTION_VIEW);\r\n        i.setData(Uri.parse(url));\r\n        startActivity(i);*/\r\n        Log.d(TAG, \"openBrowser: open browser called !!\");\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onPaymentSuccess(@NotNull Object o) {\r\n        HashMap<String, Object> result = (HashMap<String, Object>) o;\r\n        String merchantResponse = (String) result.get(PayUCheckoutProConstants.CP_MERCHANT_RESPONSE);\r\n        bookAppointment.startBookingAppointment(merchantResponse);\r\n    }\r\n\r\n    @Override\r\n    public void onPaymentFailure(@NotNull Object response) {\r\n        Toast.makeText(instance, R.string.failed_to_book, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    @Override\r\n    public void onPaymentCancel(boolean b) {\r\n        Log.d(TAG, \"onPaymentCancel: \" + b);\r\n        Toast.makeText(instance, R.string.failed_to_book, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    @Override\r\n    public void onError(@NotNull ErrorResponse errorResponse) {\r\n        String errorMessage = errorResponse.getErrorMessage();\r\n        Log.d(TAG, \"onError: \" + errorMessage);\r\n        Toast.makeText(instance, R.string.failed_to_book, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    @Override\r\n    public void generateHash(@NotNull HashMap<String, String> hashMap, @NotNull com.payu.ui.model.listeners.PayUHashGenerationListener payUHashGenerationListener) {\r\n        Log.d(TAG, \"generateHash: \");\r\n    }\r\n\r\n    @Override\r\n    public void setWebViewProperties(@Nullable WebView webView, @Nullable Object o) {\r\n\r\n    }\r\n\r\n    private class LocationAddressResultReceiver extends ResultReceiver {\r\n        LocationAddressResultReceiver(Handler handler) {\r\n            super(handler);\r\n        }\r\n\r\n        @Override\r\n        protected void onReceiveResult(int resultCode, Bundle resultData) {\r\n            if (resultCode == 0) {\r\n                Log.d(\"Address\", \"Location null retrying\");\r\n                getAddress();\r\n            }\r\n\r\n            if (resultCode == 1) {\r\n                Toast.makeText(PatientDashboard.this, \"Address not found, \", Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            String currentAdd = resultData.getString(\"address_result\");\r\n            String lat = resultData.getString(\"lat\");\r\n            String lng = resultData.getString(\"lng\");\r\n            showResults(currentAdd, lat, lng);\r\n\r\n        }\r\n    }\r\n\r\n    public void showResults(String currentAdd, String lat, String lng) {\r\n        final String[] address = currentAdd.split(\",\");\r\n\r\n        try {\r\n            dashboard2Binding.tvLocation.setText(address[1]);\r\n            dashboard2Binding.tvCity.setText(address[0]);\r\n\r\n            setLat(lat);\r\n            setLng(lng);\r\n\r\n            setAreaName(address[1]);\r\n            setCityName(address[0]);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        startLocationUpdates();\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        fusedLocationClient.removeLocationUpdates(locationCallback);\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == REQUEST_ENABLE_BT) {\r\n            SearchBluetoothDeviceFragment.getInstance().CheckBluetoothState();\r\n        }\r\n    }\r\n\r\n    public void closeDrawer() {\r\n        mainBinding.drawerLayout.close();\r\n    }\r\n\r\n    public void openDrawer() {\r\n        mainBinding.drawerLayout.open();\r\n    }\r\n\r\n    public void updateCartCount(int count) {\r\n        if (null != cartTv) {\r\n            cartTv.setText(String.valueOf(count));\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/view/activity/PatientDashboard.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/view/activity/PatientDashboard.java	(date 1626086014812)
@@ -35,8 +35,8 @@
 import com.digidoctor.android.interfaces.NavigationInterface;
 import com.digidoctor.android.model.NavModel;
 import com.digidoctor.android.model.User;
+import com.digidoctor.android.newVideoCall.LocalNotification;
 import com.digidoctor.android.utility.GetAddressIntentService;
-import com.digidoctor.android.utility.NotificationVideoCall;
 import com.digidoctor.android.utility.WakefulBroadcasterReceiver;
 import com.digidoctor.android.utility.utils;
 import com.digidoctor.android.view.fragments.digiDoctorFragments.SearchBluetoothDeviceFragment;
@@ -352,10 +352,11 @@
         if (getIntent().hasExtra("action")) {
             if (getIntent().getStringExtra("action").equalsIgnoreCase("callHistory")) {
                 navController.navigate(R.id.videoCallHistoryFragment);
-                NotificationVideoCall.cancelShowMissedCallNotification();
+                LocalNotification.hideMissedCallNotification(this);
             }
         }
     }
+
 
     private void checkForUpdate() {
         new GoogleChecker("com.digidoctor.android", PatientDashboard.this, true, "en");
Index: app/src/main/java/com/digidoctor/android/utility/AppUtils.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.utility;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.app.DownloadManager;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.res.Configuration;\r\nimport android.content.res.Resources;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.util.DisplayMetrics;\r\nimport android.util.Log;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.fragment.app.FragmentActivity;\r\n\r\nimport com.digidoctor.android.R;\r\nimport com.digidoctor.android.model.DashboardModel1;\r\nimport com.digidoctor.android.model.DoctorModel;\r\nimport com.digidoctor.android.model.LanguageModel;\r\nimport com.digidoctor.android.model.NavModel;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.dynamiclinks.DynamicLink;\r\nimport com.google.firebase.dynamiclinks.FirebaseDynamicLinks;\r\nimport com.google.firebase.dynamiclinks.ShortDynamicLink;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.gson.Gson;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.sql.Timestamp;\r\nimport java.text.DecimalFormat;\r\nimport java.text.NumberFormat;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\nimport java.util.Objects;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\nimport static android.os.Environment.DIRECTORY_DOWNLOADS;\r\n\r\npublic class AppUtils {\r\n    public static final String CALL_STATUS = \"callStatus\";\r\n    public static final String SENDER = \"sender\";\r\n    public static final String VIDEO_CALLS = \"videoCalls\";\r\n    public static final String CALL_REJECTED_BY = \"rejectedBy\";\r\n    public static final String PATIENT = \"patient\";\r\n    public static final int VIEW_TYPE_SENDER = 0;\r\n    public static final int VIEW_TYPE_RECEIVER = 1;\r\n    public static final String RECEIVER = \"receiver\";\r\n    public static final String CALL_DISCONNECTED = \"Disconnected\";\r\n    public static final String CALL_CONNECTED = \"Connected\";\r\n    public static final String CALL_MISSED = \"Missed\";\r\n    public static final String CALL_ID = \"callId\";\r\n    public static final String CALL_REJECT = \"Rejected\";\r\n    public static final String VIDEO_CALLS_DEMO = \"videoCallDemo\";\r\n    public static final String CALL_ACCEPT = \"Connected\";\r\n    public static final String ICON = \"icon\";\r\n    public static final String ROOM_CODE = \"roomCode\";\r\n    public static final String CALL_RINGING = \"Ringing\";\r\n    public static final String DOCTOR_NAME = \"doctorName\";\r\n    private static final String TAG = \"AppUtils\";\r\n    private static final String USERS = \"Users\";\r\n    public static Toast mToast;\r\n\r\n    private static final int SECOND_MILLIS = 1000;\r\n    private static final int MINUTE_MILLIS = 60 * SECOND_MILLIS;\r\n    private static final int HOUR_MILLIS = 60 * MINUTE_MILLIS;\r\n    static ProgressDialog progressDialog;\r\n\r\n    public static final int PAY_MODE_PAY_ON_VISIT = 4;\r\n    public static final int PAY_MODE_RAZOR_PAYY = 3;\r\n    public static final int PAY_MODE_PAY_U_MONEY = 2;\r\n    public static final int Play = 1;\r\n    public static final int Pause = 0;\r\n    public static final int Stop = 2;\r\n    public static final int Playing = 3;\r\n\r\n\r\n    public static String getCurrencyFormat(Integer num) {\r\n        String COUNTRY = \"IN\";\r\n        String LANGUAGE = \"en\";\r\n        return NumberFormat.getCurrencyInstance(new Locale(LANGUAGE, COUNTRY)).format(num);\r\n    }\r\n\r\n    public static String getCurrencyFormat(double num) {\r\n        String COUNTRY = \"IN\";\r\n        String LANGUAGE = \"en\";\r\n        return NumberFormat.getCurrencyInstance(new Locale(LANGUAGE, COUNTRY)).format(num);\r\n    }\r\n\r\n    public static String getCurrencyFormat(long num) {\r\n        String COUNTRY = \"IN\";\r\n        String LANGUAGE = \"en\";\r\n        return NumberFormat.getCurrencyInstance(new Locale(LANGUAGE, COUNTRY)).format(num);\r\n    }\r\n\r\n    public static String getCurrencyFormat(String num) {\r\n        Double number = Double.parseDouble(num);\r\n        String COUNTRY = \"IN\";\r\n        String LANGUAGE = \"en\";\r\n        return NumberFormat.getCurrencyInstance(new Locale(LANGUAGE, COUNTRY)).format(number);\r\n\r\n    }\r\n\r\n\r\n    public static boolean checkForSpecialCharacter(String inputString) {\r\n        Pattern pattern = Pattern.compile(\"[^a-zA-Z0-9-\\\\s-]\");\r\n        Matcher matcher = pattern.matcher(inputString);\r\n        boolean isStringContainsSpecialCharacter = matcher.find();\r\n        if (isStringContainsSpecialCharacter) {\r\n            System.out.println(inputString + \" contains special character\");\r\n            return true;\r\n        } else {\r\n            System.out.println(inputString + \" does NOT contain special character\");\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public static List<NavModel> getNavData(Activity activity) {\r\n        List<NavModel> navModels = new ArrayList<>();\r\n       /* navModels.add(new NavModel(activity.getString(R.string.appointment), R.drawable.appointments));\r\n        navModels.add(new NavModel(activity.getString(R.string.prescription_history), R.drawable.prescription));\r\n        navModels.add(new NavModel(activity.getString(R.string.investigation_history), R.drawable.investigation));\r\n        navModels.add(new NavModel(activity.getString(R.string.vitals_hitory), R.drawable.investigation));\r\n        navModels.add(new NavModel(activity.getString(R.string.add_family_member), R.drawable.family_members));\r\n        navModels.add(new NavModel(activity.getString(R.string.lab_tests), R.drawable.lab_test_icon));\r\n        navModels.add(new NavModel(activity.getString(R.string.orders), R.drawable.order));\r\n        navModels.add(new NavModel(activity.getString(R.string.notifications), R.drawable.notification));\r\n        navModels.add(new NavModel(activity.getString(R.string.settings), R.drawable.settings));\r\n        navModels.add(new NavModel(activity.getString(R.string.about_us), R.drawable.aboutus));\r\n        navModels.add(new NavModel(activity.getString(R.string.medicine_reminder), R.drawable.ic_baseline_alarm_24));\r\n        navModels.add(new NavModel(activity.getString(R.string.change_language), R.drawable.language_icon));\r\n        navModels.add(new NavModel(activity.getString(R.string.share_app), R.drawable.language_icon));\r\n        navModels.add(new NavModel(activity.getString(R.string.symptom_tracker), R.drawable.symptom_tracker_image));\r\n        navModels.add(new NavModel(activity.getString(R.string.lab_order), R.drawable.symptom_tracker_image));\r\n        navModels.add(new NavModel(activity.getString(R.string.home_isolation_request), R.drawable.symptom_tracker_image));\r\n\r\n        navModels.add(new NavModel(activity.getString(R.string.logout), R.drawable.logout));*/\r\n        return navModels;\r\n    }\r\n\r\n    public static List<DashboardModel1> getDashboardList(Activity activity) {\r\n        List<DashboardModel1> dashboardModel1s = new ArrayList<>();\r\n        dashboardModel1s.add(new DashboardModel1(activity.getString(R.string.speciality), activity.getString(R.string.find_doctors_by)));\r\n        dashboardModel1s.add(new DashboardModel1(activity.getString(R.string.symptoms), activity.getString(R.string.find_doctors_by)));\r\n        dashboardModel1s.add(new DashboardModel1(activity.getString(R.string.tests), activity.getString(R.string.lab)));\r\n        dashboardModel1s.add(new DashboardModel1(activity.getString(R.string.pharmacy), activity.getString(R.string.digi)));\r\n        return dashboardModel1s;\r\n    }\r\n\r\n    public static void shareApp(String uri, String description, Activity activity) {\r\n        Task<ShortDynamicLink> shortLinkTask = FirebaseDynamicLinks.getInstance().createDynamicLink()\r\n                .setLink(Uri.parse(uri))\r\n                .setDomainUriPrefix(\"https://digidoctor.page.link\")\r\n                .setAndroidParameters(\r\n                        new DynamicLink.AndroidParameters.Builder(\"com.digidoctor.android\")\r\n                                .setMinimumVersion(30)\r\n                                .build())\r\n                .setIosParameters(\r\n                        new DynamicLink.IosParameters.Builder(\"com.criteriontech.digidoc\")\r\n                                .setAppStoreId(\"1517201659\")\r\n                                .setMinimumVersion(\"1.0\")\r\n                                .build())\r\n                .setSocialMetaTagParameters(\r\n                        new DynamicLink.SocialMetaTagParameters.Builder()\r\n                                .setTitle(\"Digi Doctor\")\r\n                                .setDescription(description)\r\n                                .build())\r\n                .buildShortDynamicLink()\r\n                .addOnCompleteListener(activity, task -> {\r\n                    if (task.isSuccessful()) {\r\n                        Uri shortLink = task.getResult().getShortLink();\r\n                        Uri flowchartLink = task.getResult().getPreviewLink();\r\n                        Log.d(TAG, \"shortLink: \" + shortLink);\r\n                        Log.d(TAG, \"flowchartLink: \" + flowchartLink);\r\n                        assert shortLink != null;\r\n                        openShareAppDialog(shortLink.toString(), activity);\r\n\r\n                    } else {\r\n                        Log.d(TAG, \"onComplete: Error \" + Objects.requireNonNull(task.getException()).getLocalizedMessage());\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    public static void openShareAppDialog(String link, Activity activity) {\r\n        Intent intent2 = new Intent();\r\n        intent2.setAction(Intent.ACTION_SEND);\r\n        intent2.setType(\"text/plain\");\r\n        intent2.putExtra(Intent.EXTRA_TEXT, link);\r\n        activity.startActivity(Intent.createChooser(intent2, \"Share via\"));\r\n    }\r\n\r\n    public static void showRequestDialog(Activity activity) {\r\n\r\n        //Log.d(\"Token-Number\", AppSettings.getString(AppSettings.token));\r\n\r\n        try {\r\n            if (!((Activity) activity).isFinishing()) {\r\n                progressDialog = ProgressDialog.show(activity, null, null, false, true);\r\n                progressDialog.getWindow().setBackgroundDrawable(new ColorDrawable(activity.getResources().getColor(android.R.color.transparent)));\r\n                progressDialog.setContentView(R.layout.progress_bar);\r\n                progressDialog.show();\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public static void showRequestDialog(Context activity) {\r\n\r\n        //Log.d(\"Token-Number\", AppSettings.getString(AppSettings.token));\r\n\r\n        try {\r\n            if (!((Activity) activity).isFinishing()) {\r\n                progressDialog = ProgressDialog.show(activity, null, null, false, true);\r\n                progressDialog.getWindow().setBackgroundDrawable(new ColorDrawable(activity.getResources().getColor(android.R.color.transparent)));\r\n                progressDialog.setContentView(R.layout.progress_bar);\r\n                progressDialog.show();\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public static void hideDialog() {\r\n        try {\r\n            if (progressDialog != null && progressDialog.isShowing()) {\r\n                progressDialog.dismiss();\r\n                progressDialog = null;\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static String getJSONFromModel(Object o) {\r\n        Gson gson = new Gson();\r\n        String jsonString = gson.toJson(o);\r\n        try {\r\n            JSONObject request = new JSONObject(jsonString);\r\n            return request.toString();\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n            return \"\";\r\n        }\r\n    }\r\n\r\n    public static String parseDateToFormatDMY(String oldDate) {\r\n        String inputPattern = \"yyyy/MM/dd\";\r\n        String outputPattern = \"yyyy-MM-dd\";\r\n        SimpleDateFormat inputFormat = new SimpleDateFormat(inputPattern);\r\n        SimpleDateFormat outputFormat = new SimpleDateFormat(outputPattern);\r\n\r\n        Date date;\r\n        String str = null;\r\n\r\n        try {\r\n            date = inputFormat.parse(oldDate);\r\n            str = outputFormat.format(date);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return str;\r\n    }\r\n\r\n    public static String parseUserDate(String oldDate) {\r\n        String inputPattern = \"dd/MM/yy\";\r\n        String outputPattern = \"yyyy-MM-dd\";\r\n        SimpleDateFormat inputFormat = new SimpleDateFormat(inputPattern);\r\n        SimpleDateFormat outputFormat = new SimpleDateFormat(outputPattern);\r\n\r\n        Date date;\r\n        String str = null;\r\n\r\n        try {\r\n            date = inputFormat.parse(oldDate);\r\n            str = outputFormat.format(date);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n\r\n        }\r\n        return str;\r\n    }\r\n\r\n\r\n    public static String parseDate(String inDate, String outPattern, String inputPattern) {\r\n        SimpleDateFormat inputFormat = new SimpleDateFormat(inputPattern);\r\n        SimpleDateFormat outputFormat = new SimpleDateFormat(outPattern);\r\n\r\n        Date date;\r\n        String str = null;\r\n\r\n        try {\r\n            date = inputFormat.parse(inDate);\r\n            str = outputFormat.format(date);\r\n            return str;\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n            return inDate;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public static String parseDate(String inDate, String outPattern) {\r\n\r\n        String inputPattern = \"dd/MM/yy\";\r\n        SimpleDateFormat inputFormat = new SimpleDateFormat(inputPattern);\r\n        SimpleDateFormat outputFormat = new SimpleDateFormat(outPattern);\r\n\r\n        Date date;\r\n        String str = null;\r\n\r\n        try {\r\n            date = inputFormat.parse(inDate);\r\n            str = outputFormat.format(date);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return str;\r\n\r\n    }\r\n\r\n\r\n    public static String getDayOfWeekDayFromDate(String date) {\r\n        String dayName = \"\";\r\n        SimpleDateFormat inFormat = new SimpleDateFormat(\"yyyy/MM/dd\");\r\n        try {\r\n            Date myDate = inFormat.parse(date);\r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEE, MMM d\");\r\n            if (myDate != null) {\r\n                dayName = simpleDateFormat.format(myDate);\r\n            }\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return dayName;\r\n\r\n    }\r\n\r\n    public static String getCurrentDateInWeekMonthDayFormat() {\r\n        Date c = Calendar.getInstance().getTime();\r\n        System.out.println(\"Current Date => \" + c);\r\n        SimpleDateFormat df = new SimpleDateFormat(\"EEE, MMM d\");\r\n        return df.format(c);\r\n    }\r\n\r\n    public static void showToastSort(Context context, String text) {\r\n        if (mToast != null && mToast.getView().isShown()) {\r\n            mToast.cancel();\r\n        }\r\n        mToast = Toast.makeText(context, text, Toast.LENGTH_LONG);\r\n        mToast.show();\r\n    }\r\n\r\n    public static boolean isEmailValid(String email) {\r\n\r\n        boolean isValid = false;\r\n\r\n        String expression = \"^[\\\\w\\\\.-]+@([\\\\w\\\\-]+\\\\.)+[A-Z]{2,4}$\";\r\n\r\n        Pattern pattern = Pattern.compile(expression, Pattern.CASE_INSENSITIVE);\r\n        Matcher matcher = pattern.matcher(email);\r\n        if (matcher.matches()) {\r\n            isValid = true;\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n\r\n    public static void showDeleteDialog(Activity activity, DialogInterface.OnClickListener onClickListener) {\r\n        new AlertDialog.Builder(activity).setMessage(activity.getString(R.string.delete_member_dialog_string))\r\n                .setPositiveButton(activity.getString(R.string.delete_member), onClickListener)\r\n                .setNegativeButton(activity.getString(R.string.cancel), (dialogInterface, i) -> dialogInterface.dismiss()).show();\r\n    }\r\n\r\n\r\n    public static void shareDocProfile(DoctorModel doctorModel, Activity activity) {\r\n        Intent intent2 = new Intent();\r\n        intent2.setAction(Intent.ACTION_SEND);\r\n        intent2.setType(\"text/plain\");\r\n        intent2.putExtra(Intent.EXTRA_TEXT, getShareDocText(doctorModel));\r\n        activity.startActivity(Intent.createChooser(intent2, \"Share via\"));\r\n    }\r\n\r\n    private static String getShareDocText(DoctorModel doctorModel) {\r\n\r\n        return \"hi there !!\\nI found A great Doctor '\" +\r\n                doctorModel.getDrName() +\r\n                \"' having\" +\r\n                \" Years of experience in \" +\r\n                doctorModel.getSpeciality() +\r\n                \".\" +\r\n                \"\\nVisit Doctor's profile \" +\r\n                \"https://www.com.digidoctor/doctor/\" +\r\n                doctorModel.getId();\r\n    }\r\n\r\n\r\n    public static void setAppLocale(String localeCode, Activity activity) {\r\n        Resources resources = activity.getResources();\r\n        DisplayMetrics dm = resources.getDisplayMetrics();\r\n        Configuration config = resources.getConfiguration();\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {\r\n            config.setLocale(new Locale(localeCode.toLowerCase()));\r\n        } else {\r\n            config.locale = new Locale(localeCode.toLowerCase());\r\n        }\r\n        resources.updateConfiguration(config, dm);\r\n    }\r\n\r\n    public static List<LanguageModel> getLanguageList() {\r\n        List<LanguageModel> models = new ArrayList<>();\r\n        models.add(new LanguageModel(\"हिन्दी\", \"hi\", false));\r\n        models.add(new LanguageModel(\"English\", \"en\", false));\r\n        models.add(new LanguageModel(\"Marathi\", \"en\", false));\r\n        models.add(new LanguageModel(\"Tamil\", \"en\", false));\r\n        models.add(new LanguageModel(\"Urdu\", \"en\", false));\r\n        models.add(new LanguageModel(\"Arabic\", \"en\", false));\r\n        models.add(new LanguageModel(\"Sanskrit\", \"en\", false));\r\n        return models;\r\n    }\r\n\r\n    public static LanguageModel getLanguageModel(int position) {\r\n        return getLanguageList().get(position);\r\n    }\r\n\r\n    public static String capitalizeFirstLetter(String whenToUse) {\r\n\r\n        try {\r\n            if (!whenToUse.contains(\"  \")) {\r\n                String[] words = whenToUse.toLowerCase().split(\" \");\r\n                StringBuilder builder = new StringBuilder();\r\n                for (int i = 0; i < words.length; i++) {\r\n                    String word = words[i];\r\n\r\n                    if (i > 0 && word.length() > 0) {\r\n                        builder.append(\" \");\r\n                    }\r\n\r\n                    String cap = word.substring(0, 1).toUpperCase() + word.substring(1);\r\n                    builder.append(cap);\r\n                }\r\n                return builder.toString();\r\n            } else {\r\n                return whenToUse;\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return whenToUse;\r\n        }\r\n    }\r\n\r\n    public static List<HashMap<String, String>> jsonObjectToList(JSONObject jsonObject) {\r\n\r\n        List<HashMap<String, String>> list = new ArrayList<>();\r\n\r\n        try {\r\n            Iterator<String> iterator = jsonObject.keys();\r\n\r\n            while (iterator.hasNext()) {\r\n                String key = iterator.next();\r\n                String value = jsonObject.getString(key);\r\n\r\n                HashMap<String, String> map = new HashMap<>();\r\n                map.put(key, value.trim());\r\n\r\n                list.add(map);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return list;\r\n\r\n    }\r\n\r\n    public static Boolean getFreeVisitData(Integer reVisitTime, String appointDate, String selectedDate) {\r\n        String dateSelected = parseDate(selectedDate, \"dd MMMM yyyy\", \"yyyy/MM/dd\");\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd MMMM yyyy\");\r\n        Calendar c = Calendar.getInstance();\r\n        try {\r\n            Date date1 = sdf.parse(appointDate);\r\n            c.setTime(date1); // Now use today date.\r\n            c.add(Calendar.DATE, reVisitTime); // Adding 5 days\r\n            String output = sdf.format(c.getTime());\r\n            System.out.println(output);\r\n            Log.d(TAG, \"selectedDate: \" + dateSelected);\r\n            Log.d(TAG, \"getFreeVisitData: \" + output);\r\n            return dateSelected.compareTo(output) < 0;\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public static String getLastFreeVisitDate(Integer reVisitTime, String appointDate) {\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd MMMM yyyy\");\r\n        Calendar c = Calendar.getInstance();\r\n        try {\r\n            Date date1 = sdf.parse(appointDate);\r\n            c.setTime(date1); // Now use today date.\r\n            c.add(Calendar.DATE, reVisitTime); // Adding 5 days\r\n            String output = sdf.format(c.getTime());\r\n            System.out.println(output);\r\n            Log.d(TAG, \"getFreeVisitData: \" + output);\r\n            return output;\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n            return \"\";\r\n        }\r\n    }\r\n\r\n\r\n    public static String prettyCount(Integer number) {\r\n        char[] suffix = {' ', 'k', 'M', 'B', 'T', 'P', 'E'};\r\n        long numValue = number.longValue();\r\n        int value = (int) Math.floor(Math.log10(numValue));\r\n        int base = value / 3;\r\n        if (value >= 3 && base < suffix.length) {\r\n            return new DecimalFormat(\"#0.0\").format(numValue / Math.pow(10, base * 3)) + suffix[base];\r\n        } else {\r\n            return new DecimalFormat(\"#,##0\").format(numValue);\r\n        }\r\n    }\r\n\r\n    public static void showToast(String s) {\r\n        try {\r\n            Toast.makeText(App.context, s, Toast.LENGTH_SHORT).show();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public static void showToolbar(Activity activity) {\r\n        Objects.requireNonNull(((AppCompatActivity) activity).getSupportActionBar()).show();\r\n    }\r\n\r\n    public static void hideToolbar(Activity activity) {\r\n        Objects.requireNonNull(((AppCompatActivity) activity).getSupportActionBar()).hide();\r\n    }\r\n\r\n    public static void updateTodatabase(String callStatus, String roomCode) {\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"callStatus\", callStatus);\r\n        map.put(\"disconnectedTimestamp\", System.currentTimeMillis());\r\n        map.put(\"disconnectedBy\", \"patient\");\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(AppUtils.VIDEO_CALLS).document(roomCode)\r\n                .update(map).addOnFailureListener(e -> Log.d(TAG, \"onFailure: \" + e.getLocalizedMessage()));\r\n    }\r\n\r\n    public static void updateTodatabase(String callStatus, String roomCode, String rejected) {\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"callStatus\", callStatus);\r\n        map.put(\"disconnectedTimestamp\", System.currentTimeMillis());\r\n        map.put(\"disconnectedBy\", \"patient\");\r\n        map.put(AppUtils.CALL_REJECTED_BY, AppUtils.PATIENT);\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(AppUtils.VIDEO_CALLS).document(roomCode)\r\n                .update(map).addOnFailureListener(e -> Log.d(TAG, \"onFailure: \" + e.getLocalizedMessage()));\r\n    }\r\n\r\n    public static void updateJoinedDatabase(String callStatus, String roomCode) {\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"callStatus\", callStatus);\r\n        map.put(\"callConnectedTimestamp\", System.currentTimeMillis());\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(AppUtils.VIDEO_CALLS).document(roomCode)\r\n                .update(map).addOnFailureListener(e -> Log.d(TAG, \"onFailure: \" + e.getLocalizedMessage()));\r\n    }\r\n\r\n    public static Animation slideDown(Activity activity) {\r\n        return AnimationUtils.loadAnimation(activity, R.anim.slide_down);\r\n    }\r\n\r\n    public static void updateTokenToDatabase(String token) {\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"token\", token);\r\n        if (null != FirebaseAuth.getInstance().getCurrentUser()) {\r\n            map.put(\"uid\", FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n            FirebaseFirestore firestore = FirebaseFirestore.getInstance();\r\n            firestore.collection(AppUtils.USERS)\r\n                    .document(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                    .update(map);\r\n        }\r\n    }\r\n\r\n    public static void setUserToFirebaseDatabase(FirebaseUser user, String token) {\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"token\", token);\r\n        map.put(\"uid\", FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n        FirebaseFirestore firestore = FirebaseFirestore.getInstance();\r\n        firestore.collection(AppUtils.USERS)\r\n                .document(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                .set(map);\r\n\r\n    }\r\n\r\n    public void downloadPdf(FragmentActivity fragmentActivity) {\r\n        Toast.makeText(fragmentActivity, \"Downloading pdf...\", Toast.LENGTH_SHORT).show();\r\n        String downLoadPdfUrl = \"https://digidoctor.in/PostCovidCare.pdf\";\r\n        Uri uri = Uri.parse(downLoadPdfUrl);\r\n        downloadFile(App.context, uri);\r\n\r\n    }\r\n\r\n    private void downloadFile(Context context, Uri uri) {\r\n        DownloadManager downloadManager = (DownloadManager)\r\n                context.getSystemService(Context.DOWNLOAD_SERVICE);\r\n        DownloadManager.Request request = new DownloadManager.Request(uri);\r\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n        request.setDestinationInExternalFilesDir(context, DIRECTORY_DOWNLOADS, \"post_coivd_booklet\");\r\n        downloadManager.enqueue(request);\r\n        Notification.createLocalNotification(\"Downloading Started\", \"Downloading Post Covid Booklet pdf\");\r\n    }\r\n\r\n    public static String getTimeFormat(long currentTimeMillis, String outFormat) {\r\n        try {\r\n\r\n            Timestamp ts = new Timestamp(System.currentTimeMillis());\r\n            Date date = ts;\r\n            System.out.println(date);\r\n\r\n            @SuppressLint(\"SimpleDateFormat\") String value = new java.text.SimpleDateFormat(outFormat).\r\n                    format(date);\r\n            return value;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    public static String StringToDate(String date, String dateInPattern) {\r\n\r\n        Calendar today = Calendar.getInstance();\r\n\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(dateInPattern);\r\n        Calendar dob = Calendar.getInstance();\r\n        try {\r\n            dob.setTime(sdf.parse(date));\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        int curYear = today.get(Calendar.YEAR);\r\n        int dobYear = dob.get(Calendar.YEAR);\r\n\r\n        int age = curYear - dobYear;\r\n\r\n\r\n        // if dob is month or day is behind today's month or day\r\n        // reduce age by 1\r\n        int curMonth = today.get(Calendar.MONTH);\r\n        int dobMonth = dob.get(Calendar.MONTH);\r\n        int months = curMonth - dobMonth;\r\n\r\n\r\n        int currDay = today.get(Calendar.DAY_OF_MONTH);\r\n        int dobdDay = dob.get(Calendar.DAY_OF_MONTH);\r\n        int Day = currDay - dobdDay;\r\n\r\n        Log.d(TAG, \"StringToDate: curMonth \" + curMonth);\r\n        Log.d(TAG, \"StringToDate: dobMonth \" + dobMonth);\r\n\r\n\r\n        if (dobMonth > curMonth) { // this year can't be counted!\r\n            age--;\r\n        } else if (dobMonth == curMonth) { // same month? check for day\r\n            int curDay = today.get(Calendar.DAY_OF_MONTH);\r\n            int dobDay = dob.get(Calendar.DAY_OF_MONTH);\r\n            if (dobDay > curDay) { // this year can't be counted!\r\n                age--;\r\n            }\r\n        }\r\n\r\n        if (age == 0 && months == 0)\r\n            return Day + \" day(s) old\";\r\n        else if (age == 0)\r\n            return months + \" months \" + Day + \" day(s) old\";\r\n        else if (months == 0) {\r\n            return age + \"year(s)\";\r\n        } else\r\n            return age + \"year(s) \" + months + \" months old\";\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/utility/AppUtils.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/utility/AppUtils.java	(date 1626069028959)
@@ -78,6 +78,7 @@
     public static final String ROOM_CODE = "roomCode";
     public static final String CALL_RINGING = "Ringing";
     public static final String DOCTOR_NAME = "doctorName";
+    public static final String NOTIFICATION_TYPE_VIDEO_CALL = "1";
     private static final String TAG = "AppUtils";
     private static final String USERS = "Users";
     public static Toast mToast;
Index: app/src/main/java/com/digidoctor/android/newVideoCall/JitsiVideoCallActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.newVideoCall;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\n\r\nimport com.digidoctor.android.utility.AppUtils;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport org.jitsi.meet.sdk.JitsiMeetActivity;\r\nimport org.jitsi.meet.sdk.JitsiMeetActivityDelegate;\r\nimport org.jitsi.meet.sdk.JitsiMeetActivityInterface;\r\nimport org.jitsi.meet.sdk.JitsiMeetConferenceOptions;\r\nimport org.jitsi.meet.sdk.JitsiMeetView;\r\nimport org.jitsi.meet.sdk.JitsiMeetViewListener;\r\n\r\nimport java.util.Map;\r\n\r\npublic class JitsiVideoCallActivity extends JitsiMeetActivity implements JitsiMeetActivityInterface, JitsiMeetViewListener {\r\n\r\n\r\n    String roomCode;\r\n\r\n    private JitsiMeetView view;\r\n    public static final String SERVER_URL = \"https://theorganicdelight.com/\";\r\n    public static final String JIT_SI_SERVER_URL = \"https://meet.jit.si/\";\r\n    FirebaseFirestore firebaseFirestore = FirebaseFirestore.getInstance();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        //setContentView(R.layout.activity_video_call_jitsi);\r\n\r\n        roomCode = getIntent().getStringExtra(AppUtils.ROOM_CODE);\r\n\r\n        listenForReaTimeCallStatus();\r\n        joinMeeting(roomCode);\r\n    }\r\n\r\n\r\n    private void listenForReaTimeCallStatus() {\r\n        firebaseFirestore.collection(AppUtils.VIDEO_CALLS_DEMO)\r\n                .document(roomCode)\r\n                .addSnapshotListener(this, (value, error) -> {\r\n                    if (null == error && null != value) {\r\n                        String callStatus = value.getString(AppUtils.CALL_STATUS);\r\n                        if (null != callStatus && !TextUtils.isEmpty(callStatus)) {\r\n                            if (callStatus.equalsIgnoreCase(AppUtils.CALL_DISCONNECTED)) {\r\n                                closeJitsiVideoCall();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void closeJitsiVideoCall() {\r\n        view.dispose();\r\n        finish();\r\n    }\r\n\r\n\r\n    private void joinMeeting(String roomCode) {\r\n        view = new JitsiMeetView(this);\r\n        JitsiMeetConferenceOptions options = new JitsiMeetConferenceOptions.Builder()\r\n                .setRoom(JIT_SI_SERVER_URL + roomCode)\r\n                .setFeatureFlag(\"toolbox.enabled\", false)\r\n                .setFeatureFlag(\"raise-hand.enabled\", false)\r\n                .setFeatureFlag(\"recording.enabled\", false)\r\n                .setFeatureFlag(\"pip.enabled\", true)\r\n                .setFeatureFlag(\"notifications.enabled\", true)\r\n                .setFeatureFlag(\"call-integration.enabled\", true)\r\n                .setFeatureFlag(\"toolbox.alwaysVisible\", false)\r\n                .setFeatureFlag(\"video-share.enabled\", false)\r\n                .setWelcomePageEnabled(false)\r\n                .build();\r\n\r\n        view.setListener(this);\r\n        view.join(options);\r\n        setContentView(view);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onActivityResult(\r\n            int requestCode,\r\n            int resultCode,\r\n            Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        JitsiMeetActivityDelegate.onActivityResult(\r\n                this, requestCode, resultCode, data);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        JitsiMeetActivityDelegate.onBackPressed();\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onConferenceTerminated(Map<String, Object> data) {\r\n        super.onConferenceTerminated(data);\r\n        closeMeetingToDatabase(AppUtils.CALL_DISCONNECTED, roomCode);\r\n    }\r\n\r\n    private void closeMeetingToDatabase(String callDisconnected, String roomCode) {\r\n        FirebaseFirestore firestore = FirebaseFirestore.getInstance();\r\n        firestore.collection(AppUtils.VIDEO_CALLS_DEMO).document(roomCode).update(AppUtils.CALL_STATUS, AppUtils.CALL_DISCONNECTED);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/newVideoCall/JitsiVideoCallActivity.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/newVideoCall/JitsiVideoCallActivity.java	(date 1626090418400)
@@ -3,6 +3,7 @@
 import android.content.Intent;
 import android.os.Bundle;
 import android.text.TextUtils;
+import android.util.Log;
 
 import com.digidoctor.android.utility.AppUtils;
 import com.google.firebase.firestore.FirebaseFirestore;
@@ -16,8 +17,11 @@
 
 import java.util.Map;
 
+import static com.digidoctor.android.newVideoCall.LocalNotification.showCallOnProgressNotification;
+
 public class JitsiVideoCallActivity extends JitsiMeetActivity implements JitsiMeetActivityInterface, JitsiMeetViewListener {
 
+    private static final String TAG = "JitsiVideoCallActivity";
 
     String roomCode;
 
@@ -31,14 +35,17 @@
         super.onCreate(savedInstanceState);
         //setContentView(R.layout.activity_video_call_jitsi);
 
+
         roomCode = getIntent().getStringExtra(AppUtils.ROOM_CODE);
 
-        listenForReaTimeCallStatus();
         joinMeeting(roomCode);
+        listenForReaTimeCallStatus();
+
     }
 
 
     private void listenForReaTimeCallStatus() {
+
         firebaseFirestore.collection(AppUtils.VIDEO_CALLS_DEMO)
                 .document(roomCode)
                 .addSnapshotListener(this, (value, error) -> {
@@ -60,6 +67,7 @@
 
 
     private void joinMeeting(String roomCode) {
+        Log.d(TAG, "joinMeeting: ");
         view = new JitsiMeetView(this);
         JitsiMeetConferenceOptions options = new JitsiMeetConferenceOptions.Builder()
                 .setRoom(JIT_SI_SERVER_URL + roomCode)
@@ -99,11 +107,12 @@
     @Override
     public void onConferenceTerminated(Map<String, Object> data) {
         super.onConferenceTerminated(data);
-        closeMeetingToDatabase(AppUtils.CALL_DISCONNECTED, roomCode);
+        closeMeetingToDatabase(roomCode);
     }
 
-    private void closeMeetingToDatabase(String callDisconnected, String roomCode) {
+    private void closeMeetingToDatabase(String roomCode) {
         FirebaseFirestore firestore = FirebaseFirestore.getInstance();
         firestore.collection(AppUtils.VIDEO_CALLS_DEMO).document(roomCode).update(AppUtils.CALL_STATUS, AppUtils.CALL_DISCONNECTED);
     }
+
 }
Index: app/src/main/java/com/digidoctor/android/newVideoCall/LocalBroadCast.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/newVideoCall/LocalBroadCast.java	(date 1626085931700)
+++ app/src/main/java/com/digidoctor/android/newVideoCall/LocalBroadCast.java	(date 1626085931700)
@@ -0,0 +1,51 @@
+package com.digidoctor.android.newVideoCall;
+
+import android.content.BroadcastReceiver;
+import android.content.Context;
+import android.content.Intent;
+import android.util.Log;
+import android.widget.Toast;
+
+import com.digidoctor.android.utility.App;
+import com.digidoctor.android.utility.AppUtils;
+import com.google.firebase.firestore.FirebaseFirestore;
+
+import java.util.HashMap;
+import java.util.Map;
+
+import es.dmoral.toasty.Toasty;
+
+import static com.digidoctor.android.newVideoCall.LocalNotification.cancelCallRingingNotification;
+
+public class LocalBroadCast extends BroadcastReceiver {
+    private static final String TAG = "LocalBroadCast";
+
+    @Override
+    public void onReceive(Context context, Intent intent) {
+        cancelCallRingingNotification(context);
+        if (intent.getStringExtra("com.jc_code_ACTION").equalsIgnoreCase(AppUtils.CALL_RINGING)) {
+            Intent incomingCallIntent = new Intent(context, IncomingCallActivity.class);
+            incomingCallIntent.putExtra("com.jc_code_ACTION", AppUtils.CALL_RINGING);
+            incomingCallIntent.putExtra(AppUtils.CALL_ID, intent.getStringExtra(AppUtils.CALL_ID));
+            incomingCallIntent.putExtra(AppUtils.ICON, intent.getStringExtra(AppUtils.ICON));
+            incomingCallIntent.putExtra(AppUtils.DOCTOR_NAME, intent.getStringExtra(AppUtils.DOCTOR_NAME));
+            incomingCallIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+            context.startActivity(incomingCallIntent);
+        } else if (intent.getStringExtra("com.jc_code_ACTION").equalsIgnoreCase(AppUtils.CALL_REJECT)) {
+            Toasty.error(App.context, "Call Rejected !!", Toast.LENGTH_SHORT).show();
+            updateCallStatus(intent.getStringExtra(AppUtils.CALL_ID));
+        }
+    }
+
+    private void updateCallStatus(String callId) {
+        FirebaseFirestore firebaseFirestore = FirebaseFirestore.getInstance();
+        Map<String, Object> map = new HashMap<>();
+        map.put(AppUtils.CALL_STATUS, AppUtils.CALL_REJECT);
+        map.put(AppUtils.CALL_REJECTED_BY, "patient");
+        firebaseFirestore.collection(AppUtils.VIDEO_CALLS_DEMO)
+                .document(callId)
+                .update(map)
+                .addOnFailureListener(e -> Log.d(TAG, "onFailure: " + e.getLocalizedMessage()));
+
+    }
+}
Index: app/src/main/java/com/digidoctor/android/newVideoCall/LocalNotification.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/newVideoCall/LocalNotification.java	(date 1626086014805)
+++ app/src/main/java/com/digidoctor/android/newVideoCall/LocalNotification.java	(date 1626086014805)
@@ -0,0 +1,164 @@
+package com.digidoctor.android.newVideoCall;
+
+import android.app.Activity;
+import android.app.Notification;
+import android.app.NotificationChannel;
+import android.app.NotificationManager;
+import android.app.PendingIntent;
+import android.content.Context;
+import android.content.Intent;
+import android.graphics.Color;
+import android.os.Build;
+
+import androidx.core.app.NotificationCompat;
+import androidx.core.content.ContextCompat;
+import androidx.core.text.HtmlCompat;
+
+import com.digidoctor.android.R;
+import com.digidoctor.android.utility.App;
+import com.digidoctor.android.utility.AppUtils;
+import com.digidoctor.android.utility.NotificationVideoCall;
+import com.digidoctor.android.view.activity.PatientDashboard;
+
+import static com.digidoctor.android.utility.NotificationVideoCall.stopSound;
+
+public class LocalNotification {
+    private static final String CHANNEL_ID = "localCallNotification";
+    private static final int NOTIFICATION_CALL_RINGING = 223322;
+    private static final int NOTIFICATION_CALL_ON_PROGRESS = 332211;
+    public static final int NOTIFICATION_MESSED_CALL = 3652;
+    private static NotificationCompat.Builder callOnProgressBuilder;
+    private static NotificationManager mManager;
+
+    Activity activity;
+    static String roomName, doctorName, icon;
+
+    public LocalNotification(Activity activity, String roomName, String doctorName, String icon) {
+        this.activity = activity;
+        this.roomName = roomName;
+        this.doctorName = doctorName;
+        this.icon = icon;
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
+            NotificationChannel androidChannel = new NotificationChannel(CHANNEL_ID,
+                    "title", NotificationManager.IMPORTANCE_HIGH);
+            androidChannel.setLockscreenVisibility(android.app.Notification.VISIBILITY_PUBLIC);
+            getManager(App.context).createNotificationChannel(androidChannel);
+        }
+
+    }
+
+    public static void showCallRingingNotification(String text, String doctorName, Activity activity) {
+
+        callOnProgressBuilder = new NotificationCompat.Builder(activity, CHANNEL_ID)
+                .setSmallIcon(R.drawable.ic_launcher_foreground)
+                .setPriority(NotificationCompat.PRIORITY_HIGH)
+                .setCategory(NotificationCompat.CATEGORY_MESSAGE)
+                .setOnlyAlertOnce(true)
+                // .setContentIntent(getVideoCallScreenIntent(activity))
+                .setContentTitle(text)
+                .setContentText(doctorName)
+                .addAction(callAction(NotificationVideoCall.ACCEPT, 1, activity))
+                .addAction(callAction(NotificationVideoCall.REJECT, 2, activity))
+                .setOngoing(true);
+        getManager(activity).notify(NOTIFICATION_CALL_RINGING, callOnProgressBuilder.build());
+    }
+
+    public static NotificationManager getManager(Context context) {
+        if (mManager == null) {
+            mManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
+        }
+        return mManager;
+    }
+
+    public static void updateCallOnProgressNotification(String textTimer, Activity activity) {
+        if (null != callOnProgressBuilder) {
+            callOnProgressBuilder.setContentText(textTimer);
+            getManager(activity).notify(NOTIFICATION_CALL_ON_PROGRESS, callOnProgressBuilder.build());
+        }
+    }
+
+    public static void showCallOnProgressNotification(String text, String doctorName, Activity context) {
+        callOnProgressBuilder = new NotificationCompat.Builder(context, CHANNEL_ID)
+                .setSmallIcon(R.drawable.ic_launcher_foreground)
+                .setPriority(NotificationCompat.PRIORITY_HIGH)
+                .setCategory(NotificationCompat.CATEGORY_MESSAGE)
+                .setOnlyAlertOnce(true)
+                .setContentIntent(getVideoCallScreenIntent(context))
+                .setContentTitle(text)
+                .setContentText(doctorName)
+                .setOngoing(true)
+        ;
+
+        getManager(context).notify(NOTIFICATION_CALL_ON_PROGRESS, callOnProgressBuilder.build());
+    }
+
+
+    private static PendingIntent getVideoCallScreenIntent(Context activity) {
+        Intent intent = new Intent(App.context, IncomingCallActivity.class);
+        intent.putExtra(AppUtils.CALL_ID, roomName);
+        intent.putExtra(AppUtils.ICON, intent);
+        intent.putExtra(AppUtils.DOCTOR_NAME, doctorName);
+        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+        return PendingIntent.getActivity(activity, 0,
+                intent, 0);
+    }
+
+
+    public static NotificationCompat.Action callAction(String action, int i, Activity activity) {
+        Intent snoozeIntent = new Intent(App.context, LocalBroadCast.class);
+        snoozeIntent.putExtra("com.jc_code_ACTION", i == 1 ? AppUtils.CALL_RINGING : AppUtils.CALL_REJECT);
+        snoozeIntent.putExtra(AppUtils.CALL_ID, roomName);
+        snoozeIntent.putExtra(AppUtils.ICON, icon);
+        snoozeIntent.putExtra(AppUtils.DOCTOR_NAME, doctorName);
+        PendingIntent pendingintent = PendingIntent.getBroadcast(App.context, i, snoozeIntent, i == 2 ? PendingIntent.FLAG_CANCEL_CURRENT : PendingIntent.FLAG_UPDATE_CURRENT);
+
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
+            return new NotificationCompat.Action.Builder(
+                    R.drawable.ic_launcher_background,
+                    HtmlCompat.fromHtml("<font color=\"" + ContextCompat.getColor(activity, i == 1 ? R.color.green : R.color.red) + "\">" + action + "</font>", HtmlCompat.FROM_HTML_MODE_LEGACY),
+                    pendingintent)
+                    .build();
+        } else return null;
+    }
+
+    public static void cancelCallRingingNotification(Activity activity) {
+        getManager(activity).cancel(null, NOTIFICATION_CALL_RINGING);
+    }
+
+    public static void cancelCallRingingNotification(Context activity) {
+        stopSound();
+        getManager(activity).cancel(null, NOTIFICATION_CALL_RINGING);
+    }
+
+    public static void hideCallOnProgressNotification(Context context) {
+        getManager(context).cancel(null, NOTIFICATION_CALL_ON_PROGRESS);
+    }
+
+    public static void showMissedCallNotification(Activity activity) {
+        Intent fullScreenIntent = new Intent(activity, PatientDashboard.class);
+        fullScreenIntent.putExtra("action", "callHistory");
+        PendingIntent fullScreenPendingIntent = PendingIntent.getActivity(activity, 0,
+                fullScreenIntent, 0);
+
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
+            NotificationChannel androidChannel = new NotificationChannel(CHANNEL_ID,
+                    "title", NotificationManager.IMPORTANCE_HIGH);
+            androidChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);
+            getManager(activity).createNotificationChannel(androidChannel);
+        }
+
+        NotificationCompat.Builder builder = new NotificationCompat.Builder(activity, CHANNEL_ID)
+                .setSmallIcon(R.drawable.ic_launcher_foreground)
+                .setContentTitle("Missed Video Call")
+                .setContentText(doctorName)
+                .setContentIntent(fullScreenPendingIntent)
+                .setVibrate(new long[]{1000, 1000, 1000, 1000, 1000})
+                .setLights(Color.RED, 3000, 3000)
+                .setPriority(NotificationCompat.PRIORITY_DEFAULT);
+        getManager(activity).notify(NOTIFICATION_MESSED_CALL, builder.build());
+    }
+
+    public static void hideMissedCallNotification(Activity activity) {
+        getManager(activity).cancel(null, NOTIFICATION_MESSED_CALL);
+    }
+}
Index: app/src/main/java/com/digidoctor/android/view/activity/SplashScreen.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.view.activity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityOptionsCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\n\r\nimport com.digidoctor.android.R;\r\nimport com.digidoctor.android.databinding.ActivityMainBinding;\r\nimport com.digidoctor.android.utility.AppUtils;\r\nimport com.digidoctor.android.utility.utils;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.iid.FirebaseInstanceId;\r\n\r\nimport timber.log.Timber;\r\n\r\nimport static com.digidoctor.android.utility.utils.IS_LOGIN;\r\nimport static com.digidoctor.android.utility.utils.fcmToken;\r\nimport static com.digidoctor.android.utility.utils.getLoginStatus;\r\nimport static com.digidoctor.android.utility.utils.setString;\r\n\r\npublic class SplashScreen extends AppCompatActivity {\r\n    private static final String TAG = \"SplashScreen\";\r\n    ActivityMainBinding activityMainBinding;\r\n    String doctorName;\r\n    String twillioAccessToken, roomName, msg, title, profilePhotoPath, type;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        activityMainBinding = DataBindingUtil.setContentView(this, R.layout.activity_main);\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        ActivityOptionsCompat activityOptionsCompat = ActivityOptionsCompat.makeSceneTransitionAnimation(SplashScreen.this, activityMainBinding.ivLogo, getString(R.string.logo_transition));\r\n\r\n        // create();\r\n        generateFcmToken(SplashScreen.this);\r\n\r\n\r\n        getData();\r\n\r\n        FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();\r\n        updateUI(currentUser);\r\n\r\n        new Handler().postDelayed(() -> {\r\n            boolean loggedIn = getLoginStatus(IS_LOGIN, SplashScreen.this);\r\n            Intent intent;\r\n            if (loggedIn) {\r\n                intent = new Intent(SplashScreen.this, PatientDashboard.class)\r\n                        .putExtra(\"twillioAccessToken\", twillioAccessToken)\r\n                        .putExtra(\"roomName\", roomName)\r\n                        .putExtra(\"msg\", msg)\r\n                        .putExtra(\"title\", title)\r\n                        .putExtra(\"doctorName\", doctorName)\r\n                        .putExtra(\"profilePhotoPath\", profilePhotoPath)\r\n                        .putExtra(\"type\", type);\r\n            } else {\r\n                intent = new Intent(SplashScreen.this, SignUpJourneyActivity.class);\r\n            }\r\n\r\n            startActivity(intent);\r\n            SplashScreen.this.finish();\r\n        }, 1000);\r\n    }\r\n\r\n    private void updateUI(FirebaseUser currentUser) {\r\n        FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        if (currentUser == null)\r\n            mAuth.signInAnonymously()\r\n                    .addOnCompleteListener(this, task -> {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseUser user = mAuth.getCurrentUser();\r\n                            String token = utils.getString(fcmToken, SplashScreen.this);\r\n                            AppUtils.setUserToFirebaseDatabase(user, token);\r\n                        } else {\r\n                            Timber.d(task.getException(), \"signInAnonymously:failure\");\r\n                            Toast.makeText(SplashScreen.this, \"Authentication failed.\",\r\n                                    Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n        else {\r\n            Timber.d(\"updateUI: %s\", mAuth.getCurrentUser().getUid());\r\n            FirebaseInstanceId.getInstance().getInstanceId().addOnSuccessListener(instanceIdResult -> {\r\n                String newToken = instanceIdResult.getToken();\r\n                AppUtils.updateTokenToDatabase(newToken);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    public static void generateFcmToken(final Activity activity) {\r\n\r\n        FirebaseInstanceId.getInstance().getInstanceId().addOnSuccessListener(instanceIdResult -> {\r\n            String newToken = instanceIdResult.getToken();\r\n            setString(fcmToken, newToken, activity);\r\n            Log.e(\"newToken2\", newToken);\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private void getData() {\r\n        if (null != getIntent().getExtras()) {\r\n            for (String key : getIntent().getExtras().keySet()) {\r\n                if (key.equals(\"twillioAccessToken\")) {\r\n                    Log.d(TAG, \"getData: twillioAccessToken \" + getIntent().getExtras().getString(key));\r\n                    twillioAccessToken = getIntent().getExtras().getString(key);\r\n                }\r\n                if (key.equals(\"doctorName\")) {\r\n                    Log.d(TAG, \"getData: doctorName \" + getIntent().getExtras().getString(key));\r\n                    doctorName = getIntent().getExtras().getString(key);\r\n                }\r\n                if (key.equals(\"message\")) {\r\n                    Log.d(TAG, \"getData: message \" + getIntent().getExtras().getString(key));\r\n                    msg = getIntent().getExtras().getString(key);\r\n                }\r\n                if (key.equals(\"type\")) {\r\n                    Log.d(TAG, \"getData: type \" + getIntent().getExtras().getString(key));\r\n                    type = getIntent().getExtras().getString(key);\r\n                }\r\n                if (key.equals(\"profilePhotoPath\")) {\r\n                    Log.d(TAG, \"getData: profilePhotoPath \" + getIntent().getExtras().getString(key));\r\n                    profilePhotoPath = getIntent().getExtras().getString(key);\r\n                }\r\n                if (key.equals(\"title\")) {\r\n                    Log.d(TAG, \"getData: title \" + getIntent().getExtras().getString(key));\r\n                    title = getIntent().getExtras().getString(key);\r\n                }\r\n                if (key.equals(\"roomName\")) {\r\n                    Log.d(TAG, \"getData: roomName \" + getIntent().getExtras().getString(key));\r\n                    roomName = getIntent().getExtras().getString(key);\r\n                }\r\n            }\r\n        } else {\r\n            Log.d(TAG, \"getData: null\");\r\n        }\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/view/activity/SplashScreen.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/view/activity/SplashScreen.java	(date 1626068725395)
@@ -1,10 +1,13 @@
 package com.digidoctor.android.view.activity;
 
 import android.app.Activity;
+import android.app.AlertDialog;
 import android.content.Intent;
+import android.net.Uri;
+import android.os.Build;
 import android.os.Bundle;
 import android.os.Handler;
-import android.util.Log;
+import android.provider.Settings;
 import android.widget.Toast;
 
 import androidx.appcompat.app.AppCompatActivity;
@@ -19,6 +22,8 @@
 import com.google.firebase.auth.FirebaseUser;
 import com.google.firebase.iid.FirebaseInstanceId;
 
+import java.util.Locale;
+
 import timber.log.Timber;
 
 import static com.digidoctor.android.utility.utils.IS_LOGIN;
@@ -28,6 +33,7 @@
 
 public class SplashScreen extends AppCompatActivity {
     private static final String TAG = "SplashScreen";
+    private static final int OVERLAY_REQUEST_CODE = 1122;
     ActivityMainBinding activityMainBinding;
     String doctorName;
     String twillioAccessToken, roomName, msg, title, profilePhotoPath, type;
@@ -48,30 +54,58 @@
         generateFcmToken(SplashScreen.this);
 
 
-        getData();
+        getNotificationData();
 
         FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();
         updateUI(currentUser);
 
-        new Handler().postDelayed(() -> {
-            boolean loggedIn = getLoginStatus(IS_LOGIN, SplashScreen.this);
-            Intent intent;
-            if (loggedIn) {
-                intent = new Intent(SplashScreen.this, PatientDashboard.class)
-                        .putExtra("twillioAccessToken", twillioAccessToken)
-                        .putExtra("roomName", roomName)
-                        .putExtra("msg", msg)
-                        .putExtra("title", title)
-                        .putExtra("doctorName", doctorName)
-                        .putExtra("profilePhotoPath", profilePhotoPath)
-                        .putExtra("type", type);
-            } else {
-                intent = new Intent(SplashScreen.this, SignUpJourneyActivity.class);
-            }
-
-            startActivity(intent);
-            SplashScreen.this.finish();
-        }, 1000);
+        new Handler().postDelayed(this::checkPermission, 1000);
+
+
+    }
+
+    private void initUserJourney() {
+        boolean loggedIn = getLoginStatus(IS_LOGIN, SplashScreen.this);
+        Intent intent;
+        if (loggedIn) {
+            intent = new Intent(SplashScreen.this, PatientDashboard.class)
+                    .putExtra("twillioAccessToken", twillioAccessToken)
+                    .putExtra("roomName", roomName)
+                    .putExtra("msg", msg)
+                    .putExtra("title", title)
+                    .putExtra("doctorName", doctorName)
+                    .putExtra("profilePhotoPath", profilePhotoPath)
+                    .putExtra("type", type);
+        } else {
+            intent = new Intent(SplashScreen.this, SignUpJourneyActivity.class);
+        }
+        startActivity(intent);
+        SplashScreen.this.finish();
+    }
+
+    public void checkPermission() {
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
+            if (!Settings.canDrawOverlays(this)) {
+                if ("xiaomi".equals(Build.MANUFACTURER.toLowerCase(Locale.ROOT))) {
+                    final Intent intent = new Intent("miui.intent.action.APP_PERM_EDITOR");
+                    intent.setClassName("com.miui.securitycenter",
+                            "com.miui.permcenter.permissions.PermissionsEditorActivity");
+                    intent.putExtra("extra_pkgname", getPackageName());
+                    new AlertDialog.Builder(this)
+                            .setTitle("Please Enable the additional permissions")
+                            .setMessage("You will not receive notifications while the app is in background if you disable these permissions")
+                            .setPositiveButton("Go to Settings", (dialog, which) -> startActivity(intent))
+                            .setIcon(android.R.drawable.ic_dialog_info)
+                            .setCancelable(false)
+                            .show();
+                } else {
+                    Intent overlaySettings = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse("package:" + getPackageName()));
+                    startActivityForResult(overlaySettings, OVERLAY_REQUEST_CODE);
+                }
+            } else initUserJourney();
+
+        } else initUserJourney();
+
     }
 
     private void updateUI(FirebaseUser currentUser) {
@@ -104,46 +138,46 @@
         FirebaseInstanceId.getInstance().getInstanceId().addOnSuccessListener(instanceIdResult -> {
             String newToken = instanceIdResult.getToken();
             setString(fcmToken, newToken, activity);
-            Log.e("newToken2", newToken);
+            Timber.e(newToken);
         });
 
     }
 
 
-    private void getData() {
+    private void getNotificationData() {
         if (null != getIntent().getExtras()) {
             for (String key : getIntent().getExtras().keySet()) {
                 if (key.equals("twillioAccessToken")) {
-                    Log.d(TAG, "getData: twillioAccessToken " + getIntent().getExtras().getString(key));
+                    Timber.d("getData: twillioAccessToken %s", getIntent().getExtras().getString(key));
                     twillioAccessToken = getIntent().getExtras().getString(key);
                 }
                 if (key.equals("doctorName")) {
-                    Log.d(TAG, "getData: doctorName " + getIntent().getExtras().getString(key));
+                    Timber.d("getData: doctorName %s", getIntent().getExtras().getString(key));
                     doctorName = getIntent().getExtras().getString(key);
                 }
                 if (key.equals("message")) {
-                    Log.d(TAG, "getData: message " + getIntent().getExtras().getString(key));
+                    Timber.d("getData: message %s", getIntent().getExtras().getString(key));
                     msg = getIntent().getExtras().getString(key);
                 }
                 if (key.equals("type")) {
-                    Log.d(TAG, "getData: type " + getIntent().getExtras().getString(key));
+                    Timber.d("getData: type %s", getIntent().getExtras().getString(key));
                     type = getIntent().getExtras().getString(key);
                 }
                 if (key.equals("profilePhotoPath")) {
-                    Log.d(TAG, "getData: profilePhotoPath " + getIntent().getExtras().getString(key));
+                    Timber.d("getData: profilePhotoPath %s", getIntent().getExtras().getString(key));
                     profilePhotoPath = getIntent().getExtras().getString(key);
                 }
                 if (key.equals("title")) {
-                    Log.d(TAG, "getData: title " + getIntent().getExtras().getString(key));
+                    Timber.d("getData: title %s", getIntent().getExtras().getString(key));
                     title = getIntent().getExtras().getString(key);
                 }
                 if (key.equals("roomName")) {
-                    Log.d(TAG, "getData: roomName " + getIntent().getExtras().getString(key));
+                    Timber.d("getData: roomName %s", getIntent().getExtras().getString(key));
                     roomName = getIntent().getExtras().getString(key);
                 }
             }
         } else {
-            Log.d(TAG, "getData: null");
+            Timber.d("getData: null");
         }
     }
 
Index: app/src/main/java/com/digidoctor/android/utility/NotificationVideoCall.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.digidoctor.android.utility;\r\n\r\nimport android.app.Activity;\r\nimport android.app.Notification;\r\nimport android.app.NotificationChannel;\r\nimport android.app.NotificationManager;\r\nimport android.app.PendingIntent;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.media.MediaPlayer;\r\nimport android.media.Ringtone;\r\nimport android.media.RingtoneManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.SystemClock;\r\n\r\nimport androidx.core.app.NotificationCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.core.text.HtmlCompat;\r\n\r\nimport com.digidoctor.android.R;\r\nimport com.digidoctor.android.broadcast.VideoCallActionBroadcast;\r\nimport com.digidoctor.android.jitsiVideoCall.VideoCallActivity;\r\nimport com.digidoctor.android.view.activity.PatientDashboard;\r\n\r\npublic class NotificationVideoCall {\r\n    private static final String TAG = \"NotificationVideoCall\";\r\n    private static final String CHANNEL_ID = \"001100\";\r\n    public static final String ACCEPT = \"Accept\";\r\n    public static final String REJECT = \"Reject\";\r\n    private static final int NOTIFICATION_MESSED_CALL = 102;\r\n    private static final int NOTIFICATION_CALL_ON_PROGRESS = 103;\r\n    public static final String DISMISS = \"Dismiss\";\r\n    private static NotificationManager mManager;\r\n    private static NotificationCompat.Builder builder;\r\n    private static NotificationCompat.Builder callOnProgressBuilder;\r\n    public static int SECOND = 1000;\r\n    static Ringtone r;\r\n    static Thread thread;\r\n\r\n    static String msg;\r\n    String title;\r\n    static String doctorName;\r\n    String profilePhotoPath;\r\n    static String roomName;\r\n\r\n    static MediaPlayer player;\r\n\r\n\r\n    public NotificationVideoCall(String msg, String title, String doctorName, String profilePhotoPath, String roomName) {\r\n        this.msg = msg;\r\n        this.title = title;\r\n        this.doctorName = doctorName;\r\n        this.profilePhotoPath = profilePhotoPath;\r\n        this.roomName = roomName;\r\n    }\r\n\r\n\r\n    public static void updateCallOnProgressNotification(String textTimer, Activity activity) {\r\n        if (null != callOnProgressBuilder) {\r\n            callOnProgressBuilder.setContentText(textTimer);\r\n            getManager(activity).notify(NOTIFICATION_CALL_ON_PROGRESS, callOnProgressBuilder.build());\r\n        }\r\n    }\r\n\r\n    public void startVideo() {\r\n        showFullScreenNotification(PatientDashboard.getInstance());\r\n    }\r\n\r\n\r\n    public void showFullScreenNotification(Activity activity) {\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\r\n            NotificationChannel androidChannel = new NotificationChannel(CHANNEL_ID,\r\n                    \"title\", NotificationManager.IMPORTANCE_HIGH);\r\n            androidChannel.setLockscreenVisibility(android.app.Notification.VISIBILITY_PUBLIC);\r\n            getManager(activity).createNotificationChannel(androidChannel);\r\n        }\r\n\r\n\r\n        builder = new NotificationCompat.Builder(activity, CHANNEL_ID)\r\n                .setSmallIcon(R.drawable.ic_launcher_foreground)\r\n                .setContentTitle(msg)\r\n                .setContentText(doctorName + \" is calling .....\")\r\n                .setCategory(NotificationCompat.CATEGORY_CALL)\r\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT)\r\n                .addAction(callAction(NotificationVideoCall.ACCEPT, 1, activity))\r\n                .addAction(callAction(NotificationVideoCall.REJECT, 2, activity))\r\n                .setAutoCancel(true)\r\n                .setOngoing(true)\r\n        //.setContentIntent(getVideoCallScreenIntent(activity))\r\n        ;\r\n        getManager(activity).notify(101, builder.build());\r\n        playNotificationSound();\r\n        updateMissedCallAlert(activity);\r\n\r\n\r\n    }\r\n\r\n    private static PendingIntent getVideoCallScreenIntent(Context activity) {\r\n        Intent fullScreenIntent = new Intent(activity, VideoCallActivity.class);\r\n        fullScreenIntent.putExtra(\"roomName\", roomName);\r\n        return PendingIntent.getActivity(activity, 0,\r\n                fullScreenIntent, 0);\r\n    }\r\n\r\n    public static void showCallOnProgressNotification(String text, Context context) {\r\n        hideNotification(context);\r\n        if (null != builder) {\r\n            callOnProgressBuilder = new NotificationCompat.Builder(context, CHANNEL_ID)\r\n                    .setSmallIcon(R.drawable.ic_launcher_foreground)\r\n                    .setPriority(NotificationCompat.PRIORITY_HIGH)\r\n                    .setCategory(NotificationCompat.CATEGORY_MESSAGE)\r\n                    .setOnlyAlertOnce(true)\r\n                    .setContentIntent(getVideoCallScreenIntent(context))\r\n                    .setContentTitle(text)\r\n                    .setContentText(\"with \" + doctorName)\r\n                    .setOngoing(true)\r\n                    .addAction(callAction(NotificationVideoCall.DISMISS, 1, context));\r\n            getManager(context).notify(NOTIFICATION_CALL_ON_PROGRESS, callOnProgressBuilder.build());\r\n        }\r\n        stopSound();\r\n        cancelShowMissedCallNotification();\r\n        /*   startForNotification(context);*/\r\n    }\r\n\r\n    public static void hideNotification(Context context) {\r\n        getManager(context).cancel(null, 101);\r\n        stopSound();\r\n    }\r\n\r\n    public static void showMissedCallNotification(Activity activity) {\r\n        playAlertSound();\r\n        Intent fullScreenIntent = new Intent(activity, PatientDashboard.class);\r\n        fullScreenIntent.putExtra(\"action\", \"callHistory\");\r\n        PendingIntent fullScreenPendingIntent = PendingIntent.getActivity(activity, 0,\r\n                fullScreenIntent, 0);\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\r\n            NotificationChannel androidChannel = new NotificationChannel(CHANNEL_ID,\r\n                    \"title\", NotificationManager.IMPORTANCE_HIGH);\r\n            androidChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);\r\n            getManager(activity).createNotificationChannel(androidChannel);\r\n        }\r\n\r\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(activity, CHANNEL_ID)\r\n                .setSmallIcon(R.drawable.ic_launcher_foreground)\r\n                .setContentTitle(\"Missed Video Call\")\r\n                .setContentText(doctorName)\r\n                .setContentIntent(fullScreenPendingIntent)\r\n                .setVibrate(new long[]{1000, 1000, 1000, 1000, 1000})\r\n                .setLights(Color.RED, 3000, 3000)\r\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT);\r\n        getManager(activity).notify(NotificationVideoCall.NOTIFICATION_MESSED_CALL, builder.build());\r\n        AppUtils.updateTodatabase(AppUtils.CALL_MISSED, roomName);\r\n\r\n    }\r\n\r\n    public static NotificationManager getManager(Context context) {\r\n        if (mManager == null) {\r\n            mManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n        }\r\n        return mManager;\r\n    }\r\n\r\n    public static NotificationCompat.Action callAction(String action, int i, Context activity) {\r\n\r\n\r\n        Intent snoozeIntent = new Intent(App.context, VideoCallActionBroadcast.class);\r\n        snoozeIntent.putExtra(\"com.jc_code_ACTION\", action);\r\n        snoozeIntent.putExtra(\"roomName\", roomName);\r\n        PendingIntent pendingintent = PendingIntent.getBroadcast(App.context, i, snoozeIntent, i == 2 ? PendingIntent.FLAG_CANCEL_CURRENT : PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {\r\n            return new NotificationCompat.Action.Builder(\r\n                    R.drawable.ic_launcher_background,\r\n                    HtmlCompat.fromHtml(\"<font color=\\\"\" + ContextCompat.getColor(activity, i == 1 ? R.color.green : R.color.red) + \"\\\">\" + action + \"</font>\", HtmlCompat.FROM_HTML_MODE_LEGACY),\r\n                    pendingintent)\r\n                    .build();\r\n        } else return null;\r\n\r\n    }\r\n\r\n    public static void playNotificationSound() {\r\n        try {\r\n           /* Uri notificationSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);\r\n            r = RingtoneManager.getRingtone(App.context, notificationSoundUri);\r\n            r.play();*/\r\n\r\n\r\n            Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);\r\n            player = MediaPlayer.create(App.context, notification);\r\n            player.setLooping(true);\r\n            player.start();\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void stopSound() {\r\n        if (null != player) {\r\n            player.stop();\r\n        }\r\n    }\r\n\r\n    public static void updateMissedCallAlert(Activity activity) {\r\n        SECOND = 1000;\r\n        thread = new Thread(() -> {\r\n            SystemClock.sleep(45 * SECOND);\r\n            if (Thread.currentThread().isInterrupted())\r\n                return;\r\n            hideNotification(activity);\r\n            showMissedCallNotification(activity);\r\n        });\r\n        thread.start();\r\n    }\r\n\r\n    public static void cancelShowMissedCallNotification() {\r\n        thread.interrupt();\r\n    }\r\n\r\n    public static void playAlertSound() {\r\n        try {\r\n            Uri notificationSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            Ringtone r = RingtoneManager.getRingtone(App.context, notificationSoundUri);\r\n            r.play();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void hideCallOnProgressNotification(Context context) {\r\n        getManager(context).cancel(null, NOTIFICATION_CALL_ON_PROGRESS);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/digidoctor/android/utility/NotificationVideoCall.java	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/java/com/digidoctor/android/utility/NotificationVideoCall.java	(date 1626084986333)
@@ -25,6 +25,7 @@
 import com.digidoctor.android.view.activity.PatientDashboard;
 
 public class NotificationVideoCall {
+
     private static final String TAG = "NotificationVideoCall";
     private static final String CHANNEL_ID = "001100";
     public static final String ACCEPT = "Accept";
@@ -45,7 +46,7 @@
     String profilePhotoPath;
     static String roomName;
 
-    static MediaPlayer player;
+    public static MediaPlayer player;
 
 
     public NotificationVideoCall(String msg, String title, String doctorName, String profilePhotoPath, String roomName) {
@@ -151,8 +152,8 @@
                 .setVibrate(new long[]{1000, 1000, 1000, 1000, 1000})
                 .setLights(Color.RED, 3000, 3000)
                 .setPriority(NotificationCompat.PRIORITY_DEFAULT);
-        getManager(activity).notify(NotificationVideoCall.NOTIFICATION_MESSED_CALL, builder.build());
-        AppUtils.updateTodatabase(AppUtils.CALL_MISSED, roomName);
+        getManager(activity).notify(NOTIFICATION_MESSED_CALL, builder.build());
+
 
     }
 
@@ -183,24 +184,23 @@
 
     public static void playNotificationSound() {
         try {
-           /* Uri notificationSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
-            r = RingtoneManager.getRingtone(App.context, notificationSoundUri);
-            r.play();*/
-
-
             Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
             player = MediaPlayer.create(App.context, notification);
             player.setLooping(true);
             player.start();
-
         } catch (Exception e) {
             e.printStackTrace();
         }
     }
 
+    public static void startNotificationSound() {
+        player.start();
+    }
+
     public static void stopSound() {
         if (null != player) {
             player.stop();
+            player = null;
         }
     }
 
Index: app/src/main/res/raw/rcv_call.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\"v\":\"5.5.2\",\"fr\":30,\"ip\":0,\"op\":90,\"w\":1020,\"h\":1020,\"nm\":\"Comp 1\",\"ddd\":0,\"assets\":[],\"layers\":[{\"ddd\":0,\"ind\":1,\"ty\":4,\"nm\":\"facetime-button Outlines\",\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.833],\"y\":[0.833]},\"o\":{\"x\":[0.167],\"y\":[0.167]},\"t\":30,\"s\":[0]},{\"i\":{\"x\":[0.833],\"y\":[0.833]},\"o\":{\"x\":[0.167],\"y\":[0.167]},\"t\":40,\"s\":[-10]},{\"i\":{\"x\":[0.833],\"y\":[0.833]},\"o\":{\"x\":[0.167],\"y\":[0.167]},\"t\":50,\"s\":[10]},{\"i\":{\"x\":[0.833],\"y\":[0.833]},\"o\":{\"x\":[0.167],\"y\":[0.167]},\"t\":60,\"s\":[0]},{\"i\":{\"x\":[0.833],\"y\":[0.833]},\"o\":{\"x\":[0.167],\"y\":[0.167]},\"t\":70,\"s\":[-10]},{\"i\":{\"x\":[0.833],\"y\":[0.833]},\"o\":{\"x\":[0.167],\"y\":[0.167]},\"t\":80,\"s\":[10]},{\"t\":89,\"s\":[0]}],\"ix\":10},\"p\":{\"a\":0,\"k\":[510.182,510.39,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[58.5,42.5,0],\"ix\":1},\"s\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":0,\"s\":[183,183,100]},{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":20,\"s\":[253,253,100]},{\"t\":30,\"s\":[199,199,100]}],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[1.695,0.738],[0.519,0],[0.782,-0.824],[0,0],[0,0],[3.672,3.672],[5.172,0],[0,0],[3.672,-3.672],[0,-5.168],[0,0],[-3.672,-3.672],[-5.168,0],[0,0],[-3.676,3.672],[0,5.172],[0,0],[0,0],[-1.176,0],[-0.567,0.218],[0,1.824],[0,0]],\"o\":[[-0.567,-0.215],[-1.176,0],[0,0],[0,0],[0,-5.168],[-3.676,-3.672],[0,0],[-5.168,0],[-3.672,3.672],[0,0],[0,5.172],[3.672,3.672],[0,0],[5.172,0],[3.672,-3.672],[0,0],[0,0],[0.782,0.825],[0.519,0],[1.695,-0.739],[0,0],[0,-1.828]],\"v\":[[55.857,-39.305],[54.228,-39.629],[51.294,-38.391],[25.029,-12.188],[25.029,-22.945],[19.521,-36.207],[6.255,-41.715],[-39.631,-41.715],[-52.893,-36.207],[-58.4,-22.945],[-58.4,22.941],[-52.893,36.207],[-39.631,41.715],[6.255,41.715],[19.521,36.207],[25.029,22.941],[25.029,12.121],[51.294,38.39],[54.228,39.629],[55.857,39.301],[58.4,35.457],[58.4,-35.457]],\"c\":true},\"ix\":2},\"nm\":\"Path 1\",\"mn\":\"ADBE Vector Shape - Group\",\"hd\":false},{\"ind\":1,\"ty\":\"sh\",\"ix\":2,\"ks\":{\"a\":0,\"k\":{\"i\":[[0,0]],\"o\":[[0,0]],\"v\":[[55.857,-39.305]],\"c\":false},\"ix\":2},\"nm\":\"Path 2\",\"mn\":\"ADBE Vector Shape - Group\",\"hd\":false},{\"ty\":\"mm\",\"mm\":1,\"nm\":\"Merge Paths 1\",\"mn\":\"ADBE Vector Filter - Merge\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,1,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill 1\",\"mn\":\"ADBE Vector Graphic - Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[58.4,42.287],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group 1\",\"np\":4,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBE Vector Group\",\"hd\":false}],\"ip\":0,\"op\":90,\"st\":0,\"bm\":0},{\"ddd\":0,\"ind\":3,\"ty\":4,\"nm\":\"Shape Layer 2\",\"sr\":1,\"ks\":{\"o\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.833],\"y\":[0.833]},\"o\":{\"x\":[0.167],\"y\":[0.167]},\"t\":42,\"s\":[84]},{\"t\":60,\"s\":[0]}],\"ix\":11},\"r\":{\"a\":0,\"k\":-90,\"ix\":10},\"p\":{\"a\":0,\"k\":[510,510,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0,0],\"ix\":1},\"s\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":0,\"s\":[5,5,100]},{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":20,\"s\":[48,48,100]},{\"t\":60,\"s\":[94,94,100]}],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"d\":1,\"ty\":\"el\",\"s\":{\"a\":0,\"k\":[600,600],\"ix\":2},\"p\":{\"a\":0,\"k\":[0,0],\"ix\":3},\"nm\":\"Ellipse Path 1\",\"mn\":\"ADBE Vector Shape - Ellipse\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[0.437835214652,0.159876954322,0.886274509804,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":2,\"bm\":0,\"nm\":\"Fill 1\",\"mn\":\"ADBE Vector Graphic - Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[0,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Ellipse 1\",\"np\":3,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBE Vector Group\",\"hd\":false}],\"ip\":0,\"op\":90,\"st\":0,\"bm\":0},{\"ddd\":0,\"ind\":4,\"ty\":4,\"nm\":\"Shape Layer 1\",\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":0,\"k\":-90,\"ix\":10},\"p\":{\"a\":0,\"k\":[510,510,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0,0],\"ix\":1},\"s\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":0,\"s\":[91,91,100]},{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":30,\"s\":[118,118,100]},{\"t\":45,\"s\":[95,95,100]}],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"d\":1,\"ty\":\"el\",\"s\":{\"a\":0,\"k\":[600,600],\"ix\":2},\"p\":{\"a\":0,\"k\":[0,0],\"ix\":3},\"nm\":\"Ellipse Path 1\",\"mn\":\"ADBE Vector Shape - Ellipse\",\"hd\":false},{\"ty\":\"gf\",\"o\":{\"a\":0,\"k\":100,\"ix\":10},\"r\":2,\"bm\":0,\"g\":{\"p\":5,\"k\":{\"a\":0,\"k\":[0,0.294,0.035,0.71,0,0.294,0.035,0.71,0,0.294,0.035,0.71,0.5,0.357,0.049,0.855,1,0.42,0.063,1],\"ix\":9}},\"s\":{\"a\":0,\"k\":[-146,0],\"ix\":5},\"e\":{\"a\":0,\"k\":[110,0],\"ix\":6},\"t\":1,\"nm\":\"Gradient Fill 1\",\"mn\":\"ADBE Vector Graphic - G-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[0,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Ellipse 1\",\"np\":3,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBE Vector Group\",\"hd\":false}],\"ip\":0,\"op\":90,\"st\":0,\"bm\":0},{\"ddd\":0,\"ind\":5,\"ty\":4,\"nm\":\"back layer 2\",\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":19,\"ix\":11},\"r\":{\"a\":0,\"k\":-90,\"ix\":10},\"p\":{\"a\":0,\"k\":[510,510,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0,0],\"ix\":1},\"s\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":0,\"s\":[89,89,100]},{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":51,\"s\":[99,99,100]},{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":63,\"s\":[100.947,100.947,100]},{\"t\":89,\"s\":[116,116,100]}],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"d\":1,\"ty\":\"el\",\"s\":{\"a\":0,\"k\":[600,600],\"ix\":2},\"p\":{\"a\":0,\"k\":[0,0],\"ix\":3},\"nm\":\"Ellipse Path 1\",\"mn\":\"ADBE Vector Shape - Ellipse\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[0.458636773801,0.125490188599,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":2,\"bm\":0,\"nm\":\"Fill 1\",\"mn\":\"ADBE Vector Graphic - Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[0,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Ellipse 1\",\"np\":3,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBE Vector Group\",\"hd\":false}],\"ip\":0,\"op\":90,\"st\":0,\"bm\":0},{\"ddd\":0,\"ind\":6,\"ty\":4,\"nm\":\"back layer\",\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":19,\"ix\":11},\"r\":{\"a\":0,\"k\":-90,\"ix\":10},\"p\":{\"a\":0,\"k\":[510,510,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0,0],\"ix\":1},\"s\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":0,\"s\":[89,89,100]},{\"i\":{\"x\":[0.833,0.833,0.833],\"y\":[0.833,0.833,0.833]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0.167,0.167,0.167]},\"t\":51,\"s\":[99,99,100]},{\"t\":89,\"s\":[140,140,100]}],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"d\":1,\"ty\":\"el\",\"s\":{\"a\":0,\"k\":[600,600],\"ix\":2},\"p\":{\"a\":0,\"k\":[0,0],\"ix\":3},\"nm\":\"Ellipse Path 1\",\"mn\":\"ADBE Vector Shape - Ellipse\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[0.458636773801,0.125490188599,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":2,\"bm\":0,\"nm\":\"Fill 1\",\"mn\":\"ADBE Vector Graphic - Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[0,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Ellipse 1\",\"np\":3,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBE Vector Group\",\"hd\":false}],\"ip\":0,\"op\":90,\"st\":0,\"bm\":0}],\"markers\":[]}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/raw/rcv_call.json	(revision 7cbbbb43ddf03f562a47007372bfd8e112a4141b)
+++ app/src/main/res/raw/rcv_call.json	(date 1626070880569)
@@ -1,1 +1,1 @@
-{"v":"5.5.2","fr":30,"ip":0,"op":90,"w":1020,"h":1020,"nm":"Comp 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"facetime-button Outlines","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":30,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":40,"s":[-10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":50,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":60,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":70,"s":[-10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":80,"s":[10]},{"t":89,"s":[0]}],"ix":10},"p":{"a":0,"k":[510.182,510.39,0],"ix":2},"a":{"a":0,"k":[58.5,42.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[183,183,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":20,"s":[253,253,100]},{"t":30,"s":[199,199,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.695,0.738],[0.519,0],[0.782,-0.824],[0,0],[0,0],[3.672,3.672],[5.172,0],[0,0],[3.672,-3.672],[0,-5.168],[0,0],[-3.672,-3.672],[-5.168,0],[0,0],[-3.676,3.672],[0,5.172],[0,0],[0,0],[-1.176,0],[-0.567,0.218],[0,1.824],[0,0]],"o":[[-0.567,-0.215],[-1.176,0],[0,0],[0,0],[0,-5.168],[-3.676,-3.672],[0,0],[-5.168,0],[-3.672,3.672],[0,0],[0,5.172],[3.672,3.672],[0,0],[5.172,0],[3.672,-3.672],[0,0],[0,0],[0.782,0.825],[0.519,0],[1.695,-0.739],[0,0],[0,-1.828]],"v":[[55.857,-39.305],[54.228,-39.629],[51.294,-38.391],[25.029,-12.188],[25.029,-22.945],[19.521,-36.207],[6.255,-41.715],[-39.631,-41.715],[-52.893,-36.207],[-58.4,-22.945],[-58.4,22.941],[-52.893,36.207],[-39.631,41.715],[6.255,41.715],[19.521,36.207],[25.029,22.941],[25.029,12.121],[51.294,38.39],[54.228,39.629],[55.857,39.301],[58.4,35.457],[58.4,-35.457]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[55.857,-39.305]],"c":false},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[58.4,42.287],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Shape Layer 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":42,"s":[84]},{"t":60,"s":[0]}],"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[5,5,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":20,"s":[48,48,100]},{"t":60,"s":[94,94,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.437835214652,0.159876954322,0.886274509804,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[91,91,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":30,"s":[118,118,100]},{"t":45,"s":[95,95,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":2,"bm":0,"g":{"p":5,"k":{"a":0,"k":[0,0.294,0.035,0.71,0,0.294,0.035,0.71,0,0.294,0.035,0.71,0.5,0.357,0.049,0.855,1,0.42,0.063,1],"ix":9}},"s":{"a":0,"k":[-146,0],"ix":5},"e":{"a":0,"k":[110,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"back layer 2","sr":1,"ks":{"o":{"a":0,"k":19,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[89,89,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":51,"s":[99,99,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":63,"s":[100.947,100.947,100]},{"t":89,"s":[116,116,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.458636773801,0.125490188599,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"back layer","sr":1,"ks":{"o":{"a":0,"k":19,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[89,89,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":51,"s":[99,99,100]},{"t":89,"s":[140,140,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.458636773801,0.125490188599,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0}],"markers":[]}
\ No newline at end of file
+{"v":"5.5.2","fr":30,"ip":0,"op":90,"w":1020,"h":1020,"nm":"Comp 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"facetime-button Outlines","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":30,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":40,"s":[-10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":50,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":60,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":70,"s":[-10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":80,"s":[10]},{"t":89,"s":[0]}],"ix":10},"p":{"a":0,"k":[510.182,510.39,0],"ix":2},"a":{"a":0,"k":[58.5,42.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[183,183,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":20,"s":[253,253,100]},{"t":30,"s":[199,199,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.695,0.738],[0.519,0],[0.782,-0.824],[0,0],[0,0],[3.672,3.672],[5.172,0],[0,0],[3.672,-3.672],[0,-5.168],[0,0],[-3.672,-3.672],[-5.168,0],[0,0],[-3.676,3.672],[0,5.172],[0,0],[0,0],[-1.176,0],[-0.567,0.218],[0,1.824],[0,0]],"o":[[-0.567,-0.215],[-1.176,0],[0,0],[0,0],[0,-5.168],[-3.676,-3.672],[0,0],[-5.168,0],[-3.672,3.672],[0,0],[0,5.172],[3.672,3.672],[0,0],[5.172,0],[3.672,-3.672],[0,0],[0,0],[0.782,0.825],[0.519,0],[1.695,-0.739],[0,0],[0,-1.828]],"v":[[55.857,-39.305],[54.228,-39.629],[51.294,-38.391],[25.029,-12.188],[25.029,-22.945],[19.521,-36.207],[6.255,-41.715],[-39.631,-41.715],[-52.893,-36.207],[-58.4,-22.945],[-58.4,22.941],[-52.893,36.207],[-39.631,41.715],[6.255,41.715],[19.521,36.207],[25.029,22.941],[25.029,12.121],[51.294,38.39],[54.228,39.629],[55.857,39.301],[58.4,35.457],[58.4,-35.457]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[55.857,-39.305]],"c":false},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[58.4,42.287],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Shape Layer 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":42,"s":[84]},{"t":60,"s":[0]}],"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[5,5,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":20,"s":[48,48,100]},{"t":60,"s":[94,94,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.058823529411764705,0.5333333333333333,0.9882352941176471,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[91,91,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":30,"s":[118,118,100]},{"t":45,"s":[95,95,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":2,"bm":0,"g":{"p":5,"k":{"a":0,"k":[0,0.058823529411764705,0.5333333333333333,0.9882352941176471,0,0.058823529411764705,0.5333333333333333,0.9882352941176471,0,0.058823529411764705,0.5333333333333333,0.9882352941176471,0.5,0.058823529411764705,0.5333333333333333,0.9882352941176471,1,0.058823529411764705,0.5333333333333333,0.9882352941176471],"ix":9}},"s":{"a":0,"k":[-146,0],"ix":5},"e":{"a":0,"k":[110,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"back layer 2","sr":1,"ks":{"o":{"a":0,"k":19,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[89,89,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":51,"s":[99,99,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":63,"s":[100.947,100.947,100]},{"t":89,"s":[116,116,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.058823529411764705,0.5333333333333333,0.9882352941176471,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"back layer","sr":1,"ks":{"o":{"a":0,"k":19,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[89,89,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":51,"s":[99,99,100]},{"t":89,"s":[140,140,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.058823529411764705,0.5333333333333333,0.9882352941176471,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0}],"markers":[]}
\ No newline at end of file
Index: app/src/main/res/drawable/video_call_disconnected_icon.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/video_call_disconnected_icon.xml	(date 1626087440734)
+++ app/src/main/res/drawable/video_call_disconnected_icon.xml	(date 1626087440734)
@@ -0,0 +1,12 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="52dp"
+    android:height="52dp"
+    android:viewportWidth="52"
+    android:viewportHeight="52">
+  <path
+      android:pathData="M26,26m-26,0a26,26 0,1 1,52 0a26,26 0,1 1,-52 0"
+      android:fillColor="#ff0000"/>
+  <path
+      android:pathData="M40.0478,26.9868A1.765,1.765 90,0 0,39.9594 25.0373,16.268 16.268,90 0,0 37.8366,23.1083 20.145,20.145 90,0 0,27.2293 18.9965a29.248,29.248 0,0 0,-3.421 0,20.145 20.145,90 0,0 -10.6073,4.1118 16.337,16.337 90,0 0,-2.1284 1.9346A1.771,1.771 0,0 0,11.0203 27.0356c0.0849,0.1273 0.6371,0.7036 1.6497,1.7161 1.6263,1.6263 1.7133,1.7006 2.1503,1.8406a1.864,1.864 0,0 0,0.9037 0.0297,2.268 2.268,90 0,0 1.0769,-0.6824 13.461,13.461 90,0 1,2.6743 -1.9346,2.278 2.278,0 0,0 0.8096,-0.5918 1.207,1.207 90,0 0,0.3606 -0.5911c0.0544,-0.1704 0.1937,-1.0253 0.3125,-1.9078S21.1885,23.3021 21.2005,23.29a14.929,14.929 90,0 1,1.5493 -0.4094,13.25 13.25,106.4298 0,1 6.4771,0.2305c0.507,0.1365 0.6159,0.1789 0.6307,0.2546 0.012,0.0488 0.1181,0.7913 0.2362,1.6504s0.239,1.6532 0.2694,1.7557a2.2,2.2 90,0 0,0.1937 0.437,2.3 2.3,90 0,0 1.0522,0.8344 13.151,13.151 90,0 1,2.5626 1.8653A2.61,2.61 0,0 0,35.2571 30.6249,1.85 1.85,90 0,0 36.6784,30.3802C36.9634,30.1857 39.9021,27.23 40.0478,26.9868Z"
+      android:fillColor="#fff"/>
+</vector>
